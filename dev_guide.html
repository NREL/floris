
<!DOCTYPE html>


<html lang="python" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Developer&#39;s Guide &#8212; FLORIS</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=87e54e7c" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=30a733bc"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-JV2SK7CNPR"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-JV2SK7CNPR');
            </script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-JV2SK7CNPR');
            </script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script src="https://unpkg.com/mermaid@10.8/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'dev_guide';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Architecture and Design" href="architecture.html" />
    <link rel="prev" title="Bibliography" href="bibliography.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="python"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/docs_image.png" class="logo__image only-light" alt="FLORIS - Home"/>
    <script>document.write(`<img src="_static/docs_image.png" class="logo__image only-dark" alt="FLORIS - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="index.html">
                    FLORIS Wake Modeling & Wind Farm Controls
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="v3_to_v4.html">Switching from FLORIS v3 to v4</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">User Reference</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="intro_concepts.html">Introductory Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_concepts.html">Advanced Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="wind_data_user.html">Wind Data Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="heterogeneous_map.html">Heterogeneous Map</a></li>
<li class="toctree-l1"><a class="reference internal" href="floating_wind_turbine.html">Floating Wind Turbine Modeling</a></li>
<li class="toctree-l1"><a class="reference internal" href="turbine_interaction.html">Turbine Library Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="operation_models_user.html">Turbine Operation Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="layout_optimization.html">Layout Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="input_reference_main.html">Main Input File Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="input_reference_turbine.html">Turbine Input File Reference</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Theory and Background</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="wake_models.html">Wake Models</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="empirical_gauss_model.html">Empirical Gaussian model</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="bibliography.html">Bibliography</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Developer Reference</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Developer's Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture and Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="code_quality.html">Code Quality</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="api_docs.html">API Documentation</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.flow_visualization.html">floris.flow_visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.floris_model.html">floris.floris_model</a></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.wind_data.html">floris.wind_data</a></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.uncertain_floris_model.html">floris.uncertain_floris_model</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="_autosummary/floris.turbine_library.html">floris.turbine_library</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/floris.turbine_library.turbine_previewer.html">floris.turbine_library.turbine_previewer</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/floris.turbine_library.turbine_utilities.html">floris.turbine_library.turbine_utilities</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.parallel_floris_model.html">floris.parallel_floris_model</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="_autosummary/floris.optimization.html">floris.optimization</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/floris.optimization.layout_optimization.html">floris.optimization.layout_optimization</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.layout_optimization.layout_optimization_base.html">floris.optimization.layout_optimization.layout_optimization_base</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.layout_optimization.layout_optimization_boundary_grid.html">floris.optimization.layout_optimization.layout_optimization_boundary_grid</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.layout_optimization.layout_optimization_pyoptsparse.html">floris.optimization.layout_optimization.layout_optimization_pyoptsparse</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.layout_optimization.layout_optimization_pyoptsparse_spread.html">floris.optimization.layout_optimization.layout_optimization_pyoptsparse_spread</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.layout_optimization.layout_optimization_random_search.html">floris.optimization.layout_optimization.layout_optimization_random_search</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.layout_optimization.layout_optimization_scipy.html">floris.optimization.layout_optimization.layout_optimization_scipy</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/floris.optimization.other.html">floris.optimization.other</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.other.boundary_grid.html">floris.optimization.other.boundary_grid</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/floris.optimization.yaw_optimization.html">floris.optimization.yaw_optimization</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.yaw_optimization.yaw_optimization_base.html">floris.optimization.yaw_optimization.yaw_optimization_base</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.yaw_optimization.yaw_optimization_tools.html">floris.optimization.yaw_optimization.yaw_optimization_tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.yaw_optimization.yaw_optimizer_geometric.html">floris.optimization.yaw_optimization.yaw_optimizer_geometric</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.yaw_optimization.yaw_optimizer_scipy.html">floris.optimization.yaw_optimization.yaw_optimizer_scipy</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.yaw_optimization.yaw_optimizer_sr.html">floris.optimization.yaw_optimization.yaw_optimizer_sr</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.layout_visualization.html">floris.layout_visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.cut_plane.html">floris.cut_plane</a></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.core.html">floris.core</a></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.convert_turbine_v3_to_v4.html">floris.convert_turbine_v3_to_v4</a></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.convert_floris_input_v3_to_v4.html">floris.convert_floris_input_v3_to_v4</a></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.utilities.html">floris.utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.type_dec.html">floris.type_dec</a></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.logging_manager.html">floris.logging_manager</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/001_opening_floris_computing_power.html">Example 1: Opening FLORIS and Computing Power</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/002_visualizations.html">Example 2: Visualizations</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/003_wind_data_objects.html">Example 3: Wind Data Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/004_set.html">Example 4: Set</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/005_getting_power.html">Example 5: Getting Turbine and Farm Power</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/006_get_farm_aep.html">Example 6: Getting Expected Power and AEP</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/007_sweeping_variables.html">Example 7: Sweeping Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/008_uncertain_models.html">Example 8: Uncertain Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/009_compare_farm_power_with_neighbor.html">Example 9: Compare farm power with neighboring farm</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples - Control optimization</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/examples_control_optimization/001_opt_yaw_single_ws.html">Example: Optimize yaw for a single wind speed and multiple wind directions</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_control_optimization/002_opt_yaw_single_ws_uncertain.html">Example: Optimize yaw for a single wind speed and multiple wind directions.</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_control_optimization/003_opt_yaw_multiple_ws.html">Example: Optimize yaw for multiple wind directions and multiple wind speeds.</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_control_optimization/004_optimize_yaw_aep.html">Example: Optimize yaw and compare AEP</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_control_optimization/005_optimize_yaw_aep_parallel.html">Example: Optimize yaw and compare AEP in parallel</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_control_optimization/006_compare_yaw_optimizers.html">Example: Compare yaw optimizers</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_control_optimization/007_optimize_yaw_with_neighbor_farms.html">Example: Optimize yaw with neighbor farm</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples - Control types</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/examples_control_types/001_derating_control.html">Example of using the simple-derating control model in FLORIS.</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_control_types/002_disable_turbines.html">Example: Disabling turbines</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_control_types/003_setting_yaw_and_disabling.html">Example: Setting yaw angles and disabling turbine</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_control_types/004_helix_active_wake_mixing.html">Example: Helix active wake mixing</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_control_types/005_peak_shaving.html">Example of using the peak-shaving turbine operation model.</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples - Emgauss</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/examples_emgauss/001_empirical_gauss_velocity_deficit_parameters.html">Example: Empirical Gaussian velocity deficit parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_emgauss/002_empirical_gauss_deflection_parameters.html">Example: Empirical Gaussian deflection parameters</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples - Floating</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/examples_floating/001_floating_turbine_models.html">Example: Floating turbines</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_floating/002_floating_vs_fixedbottom_farm.html">Example: Floating vs fixed-bottom farm</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_floating/003_tilt_driven_vertical_wake_deflection.html">Example: Tilt-driven vertical wake deflection</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples - Get flow</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/examples_get_flow/001_extract_wind_speed_at_turbines.html">Example: Extract wind speed at turbines</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_get_flow/002_extract_wind_speed_at_points.html">Example: Extract wind speed at points</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_get_flow/003_plot_velocity_deficit_profiles.html">Example: Plot velocity deficit profiles</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples - Heterogeneous</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/examples_heterogeneous/001_heterogeneous_inflow_single.html">Example: Heterogeneous Inflow for single case</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_heterogeneous/002_heterogeneous_using_wind_data.html">Example: Heterogeneous Inflow using wind data</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_heterogeneous/003_heterogeneous_speedup_by_wd_and_ws.html">Example: Heterogeneous Speedup by Wind Direction and Wind Speed</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_heterogeneous/004_heterogeneous_2d_and_3d.html">Example: Heterogeneous Inflow in 2D and 3D</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples - Layout optimization</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/examples_layout_optimization/001_optimize_layout.html">Example: Optimize Layout</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_layout_optimization/002_optimize_layout_with_heterogeneity.html">Example: Layout optimization with heterogeneous inflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_layout_optimization/003_genetic_random_search.html">Example: Layout optimization with genetic random search</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples - Multidim</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/examples_multidim/001_multi_dimensional_cp_ct.html">Example: Multi-dimensional Cp/Ct data</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_multidim/002_multi_dimensional_cp_ct_2Hs.html">Example: Multi-dimensional Cp/Ct with 2 Hs values</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples - Turbine</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/examples_turbine/001_check_turbine.html">Example: Check turbine power curves</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_turbine/002_multiple_turbine_types.html">Example: Multiple turbine types</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_turbine/003_specify_turbine_power_curve.html">Example: Specify turbine power curve</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples - Uncertain</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/examples_uncertain/001_uncertain_model_params.html">Example: Uncertain Model Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_uncertain/002_approx_floris_model.html">Example: Approximate Model Parameters</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples - Visualizations</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/examples_visualizations/001_layout_visualizations.html">Example: Layout Visualizations</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_visualizations/002_visualize_y_cut_plane.html">Example: Visualize y cut plane</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_visualizations/003_visualize_cross_plane.html">Example: Visualize cross plane</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_visualizations/004_visualize_rotor_values.html">Example: Visualize rotor velocities</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_visualizations/005_visualize_flow_by_sweeping_turbines.html">Example: Visualize flow by sweeping turbines</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples - Wind data</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/examples_wind_data/001_wind_data_comparisons.html">Example: Wind Data Comparisons</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_wind_data/002_generate_ti.html">Example: Generate TI</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_wind_data/003_generate_value.html">Example: Generate value</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/NREL/floris" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/NREL/floris/edit/main/docs/dev_guide.md" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/NREL/floris/issues/new?title=Issue%20on%20page%20%2Fdev_guide.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/dev_guide.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Developer's Guide</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-started">Getting Started</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#git-and-github-workflows">Git and GitHub Workflows</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#syncing-a-local-repository-with-nrel-floris">Syncing a local repository with NREL/FLORIS</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#code-quality-tools">Code quality tools</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#isort">isort</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ruff">Ruff</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pre-commit">Pre-commit</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#testing">Testing</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#continuous-integration">Continuous Integration</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#documentation">Documentation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-guide">Release guide</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#deploying-to-pip">Deploying to pip</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#extending-the-models">Extending the models</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="developer-s-guide">
<h1>Developer's Guide<a class="headerlink" href="#developer-s-guide" title="Link to this heading">#</a></h1>
<p>FLORIS is maintained at NREL's National Wind Technology Center.
We are excited about community contribution, and this page outlines
processes and procedures to follow when contributing to the
source code. For technical questions regarding FLORIS usage, please
post your questions to <a class="reference external" href="https://github.com/NREL/floris/discussions">GitHub Discussions</a>.</p>
<section id="getting-started">
<h2>Getting Started<a class="headerlink" href="#getting-started" title="Link to this heading">#</a></h2>
<p>There are a few steps that nearly all contributors will need to go through to get started with
making contributions to FLORIS. Each of these steps will be addressed in a later section of the
developer's guide, so please read on to learn more about each of these steps.</p>
<ol class="arabic">
<li><p>Create a fork of FLORIS on GitHub</p></li>
<li><p>Clone the repository</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>-b<span class="w"> </span>develop<span class="w"> </span>https://github.com/&lt;your-GitHub-username&gt;/floris.git
</pre></div>
</div>
</li>
<li><p>Move into the FLORIS source code directory</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>floris/
</pre></div>
</div>
</li>
<li><p>Install FLORIS in editable mode with the appropriate developer tools</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;.[develop]&quot;</span></code> is for the linting and code checking tools</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;.[docs]&quot;</span></code> is for the documentation building tools. Ideally, developers should also be
contributing to the documentation, and therefore checking that the documentation builds locally.</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;.[develop, docs]&quot;</span>
</pre></div>
</div>
</li>
<li><p>Turn on the linting and code checking tools</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pre-commit<span class="w"> </span>install
</pre></div>
</div>
</li>
</ol>
</section>
<section id="git-and-github-workflows">
<h2>Git and GitHub Workflows<a class="headerlink" href="#git-and-github-workflows" title="Link to this heading">#</a></h2>
<p>The majority of the collaboration and development for FLORIS takes place
in the <a class="reference external" href="http://github.com/nrel/floris">GitHub repository</a>. There,
<a class="reference external" href="http://github.com/nrel/floris/issues">issues</a> and
<a class="reference external" href="http://github.com/nrel/floris/pulls">pull requests</a> are managed,
questions and ideas are <a class="reference external" href="https://github.com/NREL/floris/discussions">discussed</a>,
and <a class="reference external" href="http://github.com/nrel/floris/releases">new versions</a>
are released. It is the best mechanism for engaging with the NREL team
and other developers throughout the FLORIS community.</p>
<p>FLORIS development should follow &quot;Git Flow&quot; when interacting with the GitHub
repository. Git Flow is a git workflow outlining safe methods of pushing and
pulling commits to a shared repository. Maintaining this workflow is critical
to prevent remote changes from blocking your local development. The Git Flow
process is detailed nicely <a class="reference external" href="http://nvie.com/posts/a-successful-git-branching-model">here</a>.</p>
<section id="syncing-a-local-repository-with-nrel-floris">
<h3>Syncing a local repository with NREL/FLORIS<a class="headerlink" href="#syncing-a-local-repository-with-nrel-floris" title="Link to this heading">#</a></h3>
<p>The &quot;main&quot; FLORIS repository is continuously updated along with ongoing
research at NREL. From time to time, developers of FLORIS using their own
&quot;local&quot; repositories (versions of the software that exist on a local computer)
may want to sync with NREL/FLORIS. To do this, use the following git commands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Move into the FLORIS source code directory;</span>
<span class="c1"># this may be named differently on your computer.</span>
<span class="nb">cd</span><span class="w"> </span>floris/

<span class="c1"># Find the remote name that corresponds to</span>
<span class="c1"># NREL/FLORIS; usually &quot;origin&quot; or &quot;upstream&quot;.</span>
git<span class="w"> </span>remote<span class="w"> </span>-v

<span class="c1"># Fetch the changes on all remotes.</span>
git<span class="w"> </span>fetch<span class="w"> </span>--all

<span class="c1"># Decide which branch to sync with</span>
<span class="c1"># NREL/FLORIS. Generally, this will be &quot;main&quot;.</span>
git<span class="w"> </span>checkout<span class="w"> </span>main
git<span class="w"> </span>pull<span class="w"> </span>origin<span class="w"> </span>main

<span class="c1"># Update any local working branches with the</span>
<span class="c1"># latest from NREL/FLORIS.</span>
git<span class="w"> </span>checkout<span class="w"> </span>feature/working_branch
git<span class="w"> </span>merge<span class="w"> </span>main
</pre></div>
</div>
<p>Note that the example above is a general case and may need to be modified
to fit a specific use case or purpose. If significant development has
happened locally, then <a class="reference external" href="https://www.atlassian.com/git/tutorials/using-branches/merge-conflicts">merge conflicts</a>
are likely and should be resolved as early as possible.</p>
</section>
</section>
<section id="code-quality-tools">
<h2>Code quality tools<a class="headerlink" href="#code-quality-tools" title="Link to this heading">#</a></h2>
<p>FLORIS is configured to use tools to automatically check and enforce
aspects of code quality. In general, these should be adopted by all
developers and incorporated into the development workflow. Most
tools are configured in <a class="reference external" href="https://github.com/NREL/floris/blob/main/pyproject.toml">pyproject.toml</a>,
but some may have a dedicated configuration file.</p>
<section id="isort">
<h3>isort<a class="headerlink" href="#isort" title="Link to this heading">#</a></h3>
<p>Import lines can easily get out of hand and cause unnecessary distraction
in source code files. <a class="reference external" href="https://pycqa.github.io/isort/index.html">isort</a>
is used to automatically manage imports in the source code. It can be run
directly with the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>isort<span class="w"> </span>&lt;path<span class="w"> </span>to<span class="w"> </span>file&gt;
isort<span class="w"> </span>dir/*
</pre></div>
</div>
<p>This tool was initially configured in <a class="reference external" href="https://github.com/NREL/floris/pull/535">PR#535</a>,
and additional information on specific decisions can be found there.</p>
</section>
<section id="ruff">
<h3>Ruff<a class="headerlink" href="#ruff" title="Link to this heading">#</a></h3>
<p><a class="reference external" href="https://github.com/charliermarsh/ruff">Ruff</a> is a general linter and limited auto-formatter.
It is configured in <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> through various <code class="docutils literal notranslate"><span class="pre">[tool.ruff.*]</span></code> blocks. It is a command line
tool and integrations into popular IDE's are available. A typical command to run Ruff for all of
FLORIS is the following:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ruff<span class="w"> </span>.<span class="w"> </span>--fix
</pre></div>
</div>
<p>This sets the configuration from <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>, applies the selected rules to Python files,
and fixes errors in-place where possible.</p>
<p>Ruff was initially configured in <a class="reference external" href="https://github.com/NREL/floris/pull/562">PR#562</a>, and discussed
in more detail in <a class="reference external" href="https://github.com/NREL/floris/discussions/561">D#561</a>. See the Ruff
documentation for a list of <a class="reference external" href="https://github.com/charliermarsh/ruff#supported-rules">supported rules</a>
and <a class="reference external" href="https://github.com/charliermarsh/ruff#reference">available options for various rules</a>.</p>
</section>
<section id="pre-commit">
<h3>Pre-commit<a class="headerlink" href="#pre-commit" title="Link to this heading">#</a></h3>
<p><a class="reference external" href="https://pre-commit.com">Pre-commit</a> is a utility to execute a series of git-hooks to catch
and fix formatting errors. It integrates easily with other tools, in our case isort and Ruff.
Pre-commit is tightly integrated into git and is mostly not used directly by users.</p>
<p>Once installed, the precommit hooks must be installed into each development environment with
the following command from the <code class="docutils literal notranslate"><span class="pre">floris/</span></code> directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pre-commit<span class="w"> </span>install
</pre></div>
</div>
<p>Then, each commit creation with <code class="docutils literal notranslate"><span class="pre">git</span></code> will run the installed hooks and display where
checks have failed. Pre-commit will typically modify the files directly to fix the issues. However,
each file fixed by Pre-commit must be added to the git-commit again to capture the changes. A
typical workflow is given below.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>add<span class="w"> </span>floris/simulation/turbine.py
git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Update so and so&quot;</span>
&gt;<span class="w"> </span><span class="o">[</span>WARNING<span class="o">]</span><span class="w"> </span>Unstaged<span class="w"> </span>files<span class="w"> </span>detected.
&gt;<span class="w"> </span><span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span>Stashing<span class="w"> </span>unstaged<span class="w"> </span>files<span class="w"> </span>to<span class="w"> </span>/Users/rafmudaf/.cache/pre-commit/patch1675722485-25489.
&gt;<span class="w"> </span>isort....................................................................Failed
&gt;<span class="w"> </span>-<span class="w"> </span>hook<span class="w"> </span>id:<span class="w"> </span>isort
&gt;<span class="w"> </span>-<span class="w"> </span>files<span class="w"> </span>were<span class="w"> </span>modified<span class="w"> </span>by<span class="w"> </span>this<span class="w"> </span>hook
&gt;
&gt;<span class="w"> </span>Fixing<span class="w"> </span>/Users/rafmudaf/Development/floris/floris/simulation/turbine.py

<span class="c1"># Check that the error is fixed or fixed it manually</span>
git<span class="w"> </span>status

<span class="c1"># Stage the new changes and commit</span>
git<span class="w"> </span>add<span class="w"> </span>floris/simulation/turbine.py
git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Update so and so&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="testing">
<h2>Testing<a class="headerlink" href="#testing" title="Link to this heading">#</a></h2>
<p>In order to maintain a level of confidence in the software, FLORIS is expected
to maintain a reasonable level of test coverage. To that end, unit
tests for a the low-level code in the <code class="docutils literal notranslate"><span class="pre">floris.simulation</span></code> package are included.</p>
<p>The full testing suite can by executed by running the command <code class="docutils literal notranslate"><span class="pre">pytest</span></code> from
the highest directory in the repository. A testing-only class is included
to provide consistent and convenient inputs to modules at
<code class="docutils literal notranslate"><span class="pre">floris/tests/conftest.py</span></code>.</p>
<p>Unit tests are integrated into FLORIS with <a class="reference external" href="https://docs.pytest.org/en/latest/">pytest</a>,
and they can be executed with the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>floris/
pytest<span class="w"> </span>tests/*_unit_test.py
</pre></div>
</div>
<p>Regression tests are also included through <a class="reference external" href="https://docs.pytest.org/en/latest/">pytest</a>.
Functionally, the only difference is that the regression tests take more
time to execute and exercise a large portion of the software. These can be
executed with the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>floris/
pytest<span class="w"> </span>tests/*_regression_test.py
</pre></div>
</div>
<section id="continuous-integration">
<h3>Continuous Integration<a class="headerlink" href="#continuous-integration" title="Link to this heading">#</a></h3>
<p>Continuous integration is configured with <a class="reference external" href="https://github.com/nrel/floris/actions">GitHub Actions</a>
and executes all of the existing tests for every push-event. The configuration file
is located at <code class="docutils literal notranslate"><span class="pre">floris/.github/workflows/continuous-integration-workflow.yaml</span></code>.</p>
</section>
</section>
<section id="documentation">
<h2>Documentation<a class="headerlink" href="#documentation" title="Link to this heading">#</a></h2>
<p>The online documentation is built with Jupyter Book which uses Sphinx
as a framework. It is automatically built and hosted by GitHub, but it
can also be compiled locally. Additional dependencies are required
for the documentation, and they are listed in the <code class="docutils literal notranslate"><span class="pre">EXTRAS</span></code> of <code class="docutils literal notranslate"><span class="pre">setup.py</span></code>.
The commands to build the docs are given below. After successfully
compiling, a file should be located at <code class="docutils literal notranslate"><span class="pre">docs/_build/html/index.html</span></code>.
This file can be opened in any browser.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;.[docs]&quot;</span>
jupyter-book<span class="w"> </span>build<span class="w"> </span>docs/

<span class="c1"># Lots of output to the terminal here...</span>

open<span class="w"> </span>docs/_build/html/index.html
</pre></div>
</div>
</section>
<section id="release-guide">
<h2>Release guide<a class="headerlink" href="#release-guide" title="Link to this heading">#</a></h2>
<p>Follow the process outlined here to &quot;release&quot; FLORIS.
After completing these steps, a few additional automated processes
are launched to deploy FLORIS to PyPI and conda-forge.
Be sure to complete each step in the sequence as described.</p>
<ol class="arabic simple">
<li><p>Merge the <code class="docutils literal notranslate"><span class="pre">develop</span></code> branch into <code class="docutils literal notranslate"><span class="pre">main</span></code> with a pull request.
Create a pull request titled <code class="docutils literal notranslate"><span class="pre">FLORIS</span> <span class="pre">vN.M</span></code> with version number filled in
as appropriate.
The body of the pull request should a brief summary of the changes
as well as a listing of the major changes and their associated pull requests.
Since creating the pull request does not mean it is merged, it is
reasonable to create the pull request, and edit the body of the pull
request later.
The pull request template has a checklist at the bottom that should be
uncommented for this PR.</p></li>
<li><p>Update the version number and commit to the `develop`` branch
with a commit message such as &quot;Update version to vN.M&quot;.
The version number must be updated in the following two files:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/NREL/floris/blob/main/README.md">floris/README.md</a></p></li>
<li><p><a class="reference external" href="https://github.com/NREL/floris/blob/main/floris/version.py">floris/floris/version.py</a>
Note that a <code class="docutils literal notranslate"><span class="pre">.0</span></code> version number is left off meaning that valid versions
are <code class="docutils literal notranslate"><span class="pre">v3</span></code>, <code class="docutils literal notranslate"><span class="pre">v3.1</span></code>, <code class="docutils literal notranslate"><span class="pre">v3.1.1</span></code>, etc.</p></li>
</ul>
</li>
<li><p>Verify that the documentation is building correctly.
The docs build for every commit to <code class="docutils literal notranslate"><span class="pre">develop</span></code>, so there should be no
surprises in this regard prior to a release. However, it's a good
opportunity to ensure that the documentation is up to date and there
are no obvious issues.
Check this by opening the documentation website at <a class="reference external" href="https://nrel.github.io/floris">https://nrel.github.io/floris</a>
and scrolling through the pages.
Also, verify that the automated build process has successfully completed
for the commits to <code class="docutils literal notranslate"><span class="pre">develop</span></code> in <a class="reference external" href="https://github.com/NREL/floris/actions/workflows/deploy-pages.yaml">GitHub Actions</a>.</p></li>
<li><p>The changes since the prior commit can be gotten from GitHub by going through the
process to create a release, but stopping short of actually publishing it.
In this form, GitHub provides the option to autogenerate release notes.
Be sure to choose the correct starting tag, and then hit &quot;Generate release notes&quot;.
Then, copy the generated text into the pull request body, and format it
as appropriate. A good reference is typically the previous release.</p></li>
<li><p>Merge the pull request into <code class="docutils literal notranslate"><span class="pre">main</span></code>. Select &quot;Create a merge commit&quot; from the merge
dropdown, and hit &quot;Merge pull request&quot;.</p></li>
<li><p>Create a <a class="reference external" href="https://github.com/NREL/floris/releases/new">new release</a> on GitHub
with the title &quot;vN.M&quot;. Choose to create a new tag on publish with the same
name. Also, autogenerate the release notes again. If you autogenerated the release
notes in step 4, make sure to start this step from a new browser window.
Be sure that the &quot;Set as latest release&quot; radio button is enabled.</p></li>
<li><p>Double check everything.</p></li>
<li><p>Hit &quot;Publish release&quot;.</p></li>
<li><p>Go to GitHub Actions and watch the <a class="reference external" href="https://github.com/NREL/floris/actions/workflows/python-publish.yml">Upload Python Package</a>
job complete. Upon success, FLORIS will be uploaded to PyPI for installation with pip.
If it fails, the latest release will not be distributed.</p></li>
<li><p>Merge the main branch into develop to align all branches on all remotes.</p></li>
<li><p>That's it, well done!</p></li>
</ol>
</section>
<section id="deploying-to-pip">
<h2>Deploying to pip<a class="headerlink" href="#deploying-to-pip" title="Link to this heading">#</a></h2>
<p>Generally, only NREL developers will have appropriate permissions to deploy
FLORIS updates. When the time comes, here is a great reference on doing it
is available <a class="reference external" href="https://medium.freecodecamp.org/how-to-publish-a-pyton-package-on-pypi-a89e9522ce24">here</a>.</p>
</section>
<section id="extending-the-models">
<h2>Extending the models<a class="headerlink" href="#extending-the-models" title="Link to this heading">#</a></h2>
<p>The FLORIS architecture is designed to support adding new wake models relatively easily.
Each of the following components have a general API that support plugging in to the rest of the
FLORIS framework:</p>
<ul class="simple">
<li><p>Velocity deficit</p></li>
<li><p>Wake deflection</p></li>
<li><p>Added turbulence due to the turbine wake</p></li>
<li><p>Wake combination</p></li>
<li><p>Solver algorithm</p></li>
<li><p>Grid-points</p></li>
</ul>
<p>Initially, it's recommended to copy an existing model as a starting point, and the
<a class="reference external" href="https://github.com/NREL/floris/blob/main/floris/simulation/wake_velocity/jensen.py">Jensen</a> and
<a class="reference external" href="https://github.com/NREL/floris/blob/main/floris/simulation/wake_deflection/jimenez.py">Jimenez</a>
models are good choices due to their simplicity.
New models must be registered in
<a class="reference external" href="https://github.com/NREL/floris/blob/main/floris/simulation/wake.py#L45">Wake.model_map</a>
so that they can be enabled via the input dictionary.</p>
<div class="mermaid">
            classDiagram

    class Floris

    class Farm

    class FlowField {
        u: NDArrayFloat
        v: NDArrayFloat
        w: NDArrayFloat
    }

    class Grid {
        &lt;&lt;interface&gt;&gt;
        x: NDArrayFloat
        y: NDArrayFloat
        z: NDArrayFloat
    }

    class WakeModelManager {
        &lt;&lt;interface&gt;&gt;
        combination_model: BaseModel
        deflection_model: BaseModel
        velocity_model: BaseModel
        turbulence_model: BaseModel
    }

    class Solver {
        &lt;&lt;interface&gt;&gt;
        parameters: dict
    }

    class BaseModel {
        prepare_function() dict
        function() None
    }

    Floris *-- Farm
    Floris *-- FlowField
    Floris *-- Grid
    Floris *-- WakeModelManager
    Floris --&gt; Solver

    Solver --&gt; Farm
    Solver --&gt; FlowField
    Solver --&gt; Grid
    Solver --&gt; WakeModelManager

    WakeModelManager -- BaseModel

    style Grid stroke:#FF496B, stroke-width:2px
    style WakeModelManager stroke:#FF496B, stroke-width:2px
    style Solver stroke:#FF496B, stroke-width:2px
        </div><p>All of the models have a <code class="docutils literal notranslate"><span class="pre">prepare_function</span></code> and a <code class="docutils literal notranslate"><span class="pre">function</span></code> method.
The <code class="docutils literal notranslate"><span class="pre">prepare_function</span></code> allows the model classes to extract any information from the <code class="docutils literal notranslate"><span class="pre">Grid</span></code> and
<code class="docutils literal notranslate"><span class="pre">FlowField</span></code> data structures, and this is generally used for sizing the data arrays.
The <code class="docutils literal notranslate"><span class="pre">prepare_function</span></code> should return a dictionary that will ultimately be passed to the
<code class="docutils literal notranslate"><span class="pre">function</span></code>.
The <code class="docutils literal notranslate"><span class="pre">function</span></code> method is where the actual calculation is performed.
The API is dependent on the type of model, but generally it requires some indicationg of
the location of the current turbine in the solve step and some other information about the
atmospheric conditions and operation of the turbine.
Note the <code class="docutils literal notranslate"><span class="pre">*</span></code> in the function signature, which is a Python feature that allows
any number of arguments to be passed to the function after the <code class="docutils literal notranslate"><span class="pre">*</span></code> as keyword arguments.
Typically, these arguments are the ones returned from the <code class="docutils literal notranslate"><span class="pre">prepare_function</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">prepare_function</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">grid</span><span class="p">:</span> <span class="n">Grid</span><span class="p">,</span> <span class="n">flow_field</span><span class="p">:</span> <span class="n">FlowField</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">function</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">x_i</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">y_i</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">z_i</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">axial_induction_i</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">deflection_field_i</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">yaw_angle_i</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">turbulence_intensity_i</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">ct_i</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">hub_height_i</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">rotor_diameter_i</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">variables_from_prepare_function</span><span class="p">:</span> <span class="nb">dict</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</pre></div>
</div>
<p>Some models require a special grid and/or solver, and that mapping happens in
<a class="reference external" href="https://github.com/NREL/floris/blob/main/floris/simulation/floris.py#L145">floris.simulation.Floris</a>.
Generally, a specific kind of solver requires one or a number of specific grid-types.
For example, <code class="docutils literal notranslate"><span class="pre">full_flow_sequential_solver</span></code> requires either <code class="docutils literal notranslate"><span class="pre">FlowFieldGrid</span></code> or
<code class="docutils literal notranslate"><span class="pre">FlowFieldPlanarGrid</span></code>.
So, it is often the case that adding a new solver will require adding a new grid type, as well.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="bibliography.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Bibliography</p>
      </div>
    </a>
    <a class="right-next"
       href="architecture.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Architecture and Design</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-started">Getting Started</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#git-and-github-workflows">Git and GitHub Workflows</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#syncing-a-local-repository-with-nrel-floris">Syncing a local repository with NREL/FLORIS</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#code-quality-tools">Code quality tools</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#isort">isort</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ruff">Ruff</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pre-commit">Pre-commit</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#testing">Testing</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#continuous-integration">Continuous Integration</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#documentation">Documentation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-guide">Release guide</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#deploying-to-pip">Deploying to pip</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#extending-the-models">Extending the models</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By National Renewable Energy Laboratory
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
       Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>