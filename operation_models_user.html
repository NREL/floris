
<!DOCTYPE html>


<html lang="python" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Turbine Operation Models &#8212; FLORIS</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!-- 
    this give us a css class that will be invisible only if js is disabled 
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="_static/scripts/fontawesome.js?digest=26a4bc78f4c0ddb94549"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549" />

    <script src="_static/documentation_options.js?v=30a733bc"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-JV2SK7CNPR"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-JV2SK7CNPR');
            </script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-JV2SK7CNPR');
            </script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'operation_models_user';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Layout Optimization" href="layout_optimization.html" />
    <link rel="prev" title="Turbine Library Interface" href="turbine_interaction.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="python"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/docs_image.png" class="logo__image only-light" alt="FLORIS - Home"/>
    <img src="_static/docs_image.png" class="logo__image only-dark pst-js-only" alt="FLORIS - Home"/>
  
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="index.html">
                    FLORIS Wake Modeling & Wind Farm Controls
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="v3_to_v4.html">Switching from FLORIS v3 to v4</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">User Reference</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="intro_concepts.html">Introductory Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="wind_data_user.html">Wind Data Objects</a></li>

<li class="toctree-l1"><a class="reference internal" href="floris_models.html">FLORIS Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_concepts.html">Advanced Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="heterogeneous_map.html">Heterogeneous Map</a></li>
<li class="toctree-l1"><a class="reference internal" href="floating_wind_turbine.html">Floating Wind Turbine Modeling</a></li>
<li class="toctree-l1"><a class="reference internal" href="turbine_interaction.html">Turbine Library Interface</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Turbine Operation Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="layout_optimization.html">Layout Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="input_reference_main.html">Main Input File Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="input_reference_turbine.html">Turbine Input File Reference</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Theory and Background</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="wake_models.html">Wake Models</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="empirical_gauss_model.html">Empirical Gaussian model</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="bibliography.html">Bibliography</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Developer Reference</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="dev_guide.html">Developer's Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture and Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="code_quality.html">Code Quality</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="api_docs.html">API Documentation</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.flow_visualization.html">floris.flow_visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.floris_model.html">floris.floris_model</a></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.wind_data.html">floris.wind_data</a></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.uncertain_floris_model.html">floris.uncertain_floris_model</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="_autosummary/floris.turbine_library.html">floris.turbine_library</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/floris.turbine_library.turbine_previewer.html">floris.turbine_library.turbine_previewer</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/floris.turbine_library.turbine_utilities.html">floris.turbine_library.turbine_utilities</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.parallel_floris_model.html">floris.parallel_floris_model</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="_autosummary/floris.optimization.html">floris.optimization</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/floris.optimization.layout_optimization.html">floris.optimization.layout_optimization</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.layout_optimization.layout_optimization_base.html">floris.optimization.layout_optimization.layout_optimization_base</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.layout_optimization.layout_optimization_boundary_grid.html">floris.optimization.layout_optimization.layout_optimization_boundary_grid</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.layout_optimization.layout_optimization_gridded.html">floris.optimization.layout_optimization.layout_optimization_gridded</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.layout_optimization.layout_optimization_pyoptsparse.html">floris.optimization.layout_optimization.layout_optimization_pyoptsparse</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.layout_optimization.layout_optimization_pyoptsparse_spread.html">floris.optimization.layout_optimization.layout_optimization_pyoptsparse_spread</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.layout_optimization.layout_optimization_random_search.html">floris.optimization.layout_optimization.layout_optimization_random_search</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.layout_optimization.layout_optimization_scipy.html">floris.optimization.layout_optimization.layout_optimization_scipy</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/floris.optimization.other.html">floris.optimization.other</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.other.boundary_grid.html">floris.optimization.other.boundary_grid</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/floris.optimization.yaw_optimization.html">floris.optimization.yaw_optimization</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.yaw_optimization.yaw_optimization_base.html">floris.optimization.yaw_optimization.yaw_optimization_base</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.yaw_optimization.yaw_optimization_tools.html">floris.optimization.yaw_optimization.yaw_optimization_tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.yaw_optimization.yaw_optimizer_geometric.html">floris.optimization.yaw_optimization.yaw_optimizer_geometric</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.yaw_optimization.yaw_optimizer_scipy.html">floris.optimization.yaw_optimization.yaw_optimizer_scipy</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.yaw_optimization.yaw_optimizer_sr.html">floris.optimization.yaw_optimization.yaw_optimizer_sr</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.layout_visualization.html">floris.layout_visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.cut_plane.html">floris.cut_plane</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="_autosummary/floris.core.html">floris.core</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/floris.core.base.html">floris.core.base</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/floris.core.core.html">floris.core.core</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/floris.core.farm.html">floris.core.farm</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/floris.core.flow_field.html">floris.core.flow_field</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/floris.core.grid.html">floris.core.grid</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/floris.core.rotor_velocity.html">floris.core.rotor_velocity</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/floris.core.solver.html">floris.core.solver</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/floris.core.turbine.html">floris.core.turbine</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.core.turbine.operation_models.html">floris.core.turbine.operation_models</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.core.turbine.turbine.html">floris.core.turbine.turbine</a></li>
</ul>
</details></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/floris.core.wake.html">floris.core.wake</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/floris.core.wake_combination.html">floris.core.wake_combination</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.core.wake_combination.fls.html">floris.core.wake_combination.fls</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.core.wake_combination.max.html">floris.core.wake_combination.max</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.core.wake_combination.sosfs.html">floris.core.wake_combination.sosfs</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/floris.core.wake_deflection.html">floris.core.wake_deflection</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.core.wake_deflection.empirical_gauss.html">floris.core.wake_deflection.empirical_gauss</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.core.wake_deflection.gauss.html">floris.core.wake_deflection.gauss</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.core.wake_deflection.jimenez.html">floris.core.wake_deflection.jimenez</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.core.wake_deflection.none.html">floris.core.wake_deflection.none</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/floris.core.wake_turbulence.html">floris.core.wake_turbulence</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.core.wake_turbulence.crespo_hernandez.html">floris.core.wake_turbulence.crespo_hernandez</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.core.wake_turbulence.none.html">floris.core.wake_turbulence.none</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.core.wake_turbulence.wake_induced_mixing.html">floris.core.wake_turbulence.wake_induced_mixing</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/floris.core.wake_velocity.html">floris.core.wake_velocity</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.core.wake_velocity.cumulative_gauss_curl.html">floris.core.wake_velocity.cumulative_gauss_curl</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.core.wake_velocity.empirical_gauss.html">floris.core.wake_velocity.empirical_gauss</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.core.wake_velocity.gauss.html">floris.core.wake_velocity.gauss</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.core.wake_velocity.jensen.html">floris.core.wake_velocity.jensen</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.core.wake_velocity.none.html">floris.core.wake_velocity.none</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.core.wake_velocity.turbopark.html">floris.core.wake_velocity.turbopark</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.core.wake_velocity.turboparkgauss.html">floris.core.wake_velocity.turboparkgauss</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.convert_turbine_v3_to_v4.html">floris.convert_turbine_v3_to_v4</a></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.convert_floris_input_v3_to_v4.html">floris.convert_floris_input_v3_to_v4</a></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.utilities.html">floris.utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.type_dec.html">floris.type_dec</a></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.logging_manager.html">floris.logging_manager</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/001_opening_floris_computing_power.html">Example 1: Opening FLORIS and Computing Power</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/002_visualizations.html">Example 2: Visualizations</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/003_wind_data_objects.html">Example 3: Wind Data Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/004_set.html">Example 4: Set</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/005_getting_power.html">Example 5: Getting Turbine and Farm Power</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/006_get_farm_aep.html">Example 6: Getting Expected Power and AEP</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/007_sweeping_variables.html">Example 7: Sweeping Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/008_uncertain_models.html">Example 8: Uncertain Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/009_parallel_models.html">Example 9: Parallel Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/010_compare_farm_power_with_neighbor.html">Example 10: Compare farm power with neighboring farm</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples - Control optimization</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/examples_control_optimization/001_opt_yaw_single_ws.html">Example: Optimize yaw for a single wind speed and multiple wind directions</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_control_optimization/002_opt_yaw_single_ws_uncertain.html">Example: Optimize yaw for a single wind speed and multiple wind directions.</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_control_optimization/003_opt_yaw_multiple_ws.html">Example: Optimize yaw for multiple wind directions and multiple wind speeds.</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_control_optimization/004_optimize_yaw_aep.html">Example: Optimize yaw and compare AEP</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_control_optimization/005_optimize_yaw_aep_parallel.html">Example: Optimize yaw and compare AEP in parallel</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_control_optimization/006_compare_yaw_optimizers.html">Example: Compare yaw optimizers</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_control_optimization/007_optimize_yaw_with_neighbor_farms.html">Example: Optimize yaw with neighbor farm</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_control_optimization/008_optimize_yaw_with_disabled_turbines.html">Example: Optimizing yaw angles with disabled turbines</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples - Control types</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/examples_control_types/001_derating_control.html">Example of using the simple-derating control model in FLORIS.</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_control_types/002_disable_turbines.html">Example: Disabling turbines</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_control_types/003_setting_yaw_and_disabling.html">Example: Setting yaw angles and disabling turbine</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_control_types/004_helix_active_wake_mixing.html">Example: Helix active wake mixing</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_control_types/005_peak_shaving.html">Example of using the peak-shaving turbine operation model.</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples - Emgauss</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/examples_emgauss/001_empirical_gauss_velocity_deficit_parameters.html">Example: Empirical Gaussian velocity deficit parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_emgauss/002_empirical_gauss_deflection_parameters.html">Example: Empirical Gaussian deflection parameters</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples - Floating</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/examples_floating/001_floating_turbine_models.html">Example: Floating turbines</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_floating/002_floating_vs_fixedbottom_farm.html">Example: Floating vs fixed-bottom farm</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_floating/003_tilt_driven_vertical_wake_deflection.html">Example: Tilt-driven vertical wake deflection</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples - Get flow</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/examples_get_flow/001_extract_wind_speed_at_turbines.html">Example: Extract wind speed at turbines</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_get_flow/002_extract_wind_speed_at_points.html">Example: Extract wind speed at points</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_get_flow/003_plot_velocity_deficit_profiles.html">Example: Plot velocity deficit profiles</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples - Heterogeneous</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/examples_heterogeneous/001_heterogeneous_inflow_single.html">Example: Heterogeneous Inflow for single case</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_heterogeneous/002_heterogeneous_using_wind_data.html">Example: Heterogeneous Inflow using wind data</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_heterogeneous/003_heterogeneous_speedup_by_wd_and_ws.html">Example: Heterogeneous Speedup by Wind Direction and Wind Speed</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_heterogeneous/004_heterogeneous_2d_and_3d.html">Example: Heterogeneous Inflow in 2D and 3D</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples - Layout optimization</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/examples_layout_optimization/001_optimize_layout.html">Example: Optimize Layout</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_layout_optimization/002_optimize_layout_with_heterogeneity.html">Example: Layout optimization with heterogeneous inflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_layout_optimization/003_genetic_random_search.html">Example: Layout optimization with genetic random search</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_layout_optimization/004_generate_gridded_layout.html">Example: Gridded layout design</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_layout_optimization/005_layout_optimization_complex_boundary.html">Example: Separated boundaries layout optimization</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples - Multidim</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/examples_multidim/001_multi_dimensional_cp_ct.html">Example: Multi-dimensional Cp/Ct data</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_multidim/002_multi_dimensional_cp_ct_2Hs.html">Example: Multi-dimensional Cp/Ct with 2 Hs values</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples - Turbine</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/examples_turbine/001_check_turbine.html">Example: Check turbine power curves</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_turbine/002_multiple_turbine_types.html">Example: Multiple turbine types</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_turbine/003_specify_turbine_power_curve.html">Example: Specify turbine power curve</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples - Turbopark</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/examples_turbopark/001_compare_turbopark_implementations.html">Example: Compare TurbOPark model implementations</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples - Uncertain</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/examples_uncertain/001_uncertain_model_params.html">Example: Uncertain Model Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_uncertain/002_approx_floris_model.html">Example: Approximate Model Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_uncertain/003_uncertain_model_with_parallelization.html">Example: Uncertain Model With Parallelization</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples - Visualizations</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/examples_visualizations/001_layout_visualizations.html">Example: Layout Visualizations</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_visualizations/002_visualize_y_cut_plane.html">Example: Visualize y cut plane</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_visualizations/003_visualize_cross_plane.html">Example: Visualize cross plane</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_visualizations/004_visualize_rotor_values.html">Example: Visualize rotor velocities</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_visualizations/005_visualize_flow_by_sweeping_turbines.html">Example: Visualize flow by sweeping turbines</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples - Wind data</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/examples_wind_data/001_wind_data_comparisons.html">Example: Wind Data Comparisons</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_wind_data/002_generate_ti.html">Example: Generate TI</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_wind_data/003_generate_value.html">Example: Generate value</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples - Wind resource grid</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/examples_wind_resource_grid/000_generate_example_wrg.html">Example: Generate Example WRG File</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_wind_resource_grid/001_wind_rose_wrg.html">Example: WindRoseWRG</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_wind_resource_grid/002_set_floris_with_wrg.html">Example: Setting FLORIS with WindRoseWRG</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_wind_resource_grid/003_wrg_compar_layout_optimization.html">Example: Layout optimization with WindRoseWRG comparison</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/NREL/floris" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/NREL/floris/edit/main/docs/operation_models_user.ipynb" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/NREL/floris/issues/new?title=Issue%20on%20page%20%2Foperation_models_user.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/operation_models_user.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Turbine Operation Models</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#selecting-the-operation-model">Selecting the operation model</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#operation-model-library">Operation model library</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#simple-model">Simple model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cosine-loss-model">Cosine loss model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#simple-derating-model">Simple derating model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mixed-operation-model">Mixed operation model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#awc-model">AWC model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#peak-shaving-model">Peak shaving model</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="turbine-operation-models">
<h1>Turbine Operation Models<a class="headerlink" href="#turbine-operation-models" title="Link to this heading">#</a></h1>
<p>Separate from the turbine models, which define the physical characterstics of the turbines, FLORIS
allows users to specify how the turbine behaves in terms of producing power and thurst. We refer to
different models for turbine behavior as &quot;operation models&quot;. A key feature of operation models is
the ability for users to specify control setpoints at which the operation model will be evaluated.
For instance, some operation models allow users to specify <code class="docutils literal notranslate"><span class="pre">yaw_angles</span></code>, which alter the power
being produced by the turbine along with it's thrust force on flow.</p>
<p>Operation models are specified by the <code class="docutils literal notranslate"><span class="pre">operation_model</span></code> key on the turbine yaml file, or by using
the <code class="docutils literal notranslate"><span class="pre">set_operation_model()</span></code> method on <code class="docutils literal notranslate"><span class="pre">FlorisModel</span></code>. Each operation model available in FLORIS is
described and demonstrated below. The simplest operation model is the <code class="docutils literal notranslate"><span class="pre">&quot;simple&quot;</span></code> operation model,
which takes no control setpoints and simply evaluates the power and thrust coefficient curves for
the turbine at the current wind condition. The default operation model is the <code class="docutils literal notranslate"><span class="pre">&quot;cosine-loss&quot;</span></code>
operation model, which models the loss in power of a turbine under yaw misalignment using a cosine
term with an exponent.</p>
<p>We first provide a quick demonstration of how to switch between different operation models. Then,
each operation model available in FLORIS is described, along with its relevant control setpoints.
We also describe the different parameters that must be specified in the turbine
<code class="docutils literal notranslate"><span class="pre">&quot;power_thrust_table&quot;</span></code> dictionary in order to use that operation model.</p>
<section id="selecting-the-operation-model">
<h2>Selecting the operation model<a class="headerlink" href="#selecting-the-operation-model" title="Link to this heading">#</a></h2>
<p>There are two options for selecting the operation model:</p>
<ol class="arabic simple">
<li><p>Manually changing the <code class="docutils literal notranslate"><span class="pre">&quot;operation_model&quot;</span></code> field of the turbine input yaml
(see <a class="reference internal" href="input_reference_turbine.html"><span class="doc std std-doc">Turbine Input File Reference</span></a>)</p></li>
<li><p>Using <code class="docutils literal notranslate"><span class="pre">set_operation_model()</span></code> on an instantiated <code class="docutils literal notranslate"><span class="pre">FlorisModel</span></code> object.</p></li>
</ol>
<p>The following code demonstrates the use of the second option.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">floris</span> <span class="kn">import</span> <span class="n">FlorisModel</span>
<span class="kn">from</span> <span class="nn">floris</span> <span class="kn">import</span> <span class="n">layout_visualization</span> <span class="k">as</span> <span class="n">layoutviz</span>

<span class="n">fmodel</span> <span class="o">=</span> <span class="n">FlorisModel</span><span class="p">(</span><span class="s2">&quot;../examples/inputs/gch.yaml&quot;</span><span class="p">)</span>

<span class="c1"># Look at layout</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">layoutviz</span><span class="o">.</span><span class="n">plot_turbine_rotors</span><span class="p">(</span><span class="n">fmodel</span><span class="p">)</span>
<span class="n">layoutviz</span><span class="o">.</span><span class="n">plot_turbine_labels</span><span class="p">(</span><span class="n">fmodel</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;x [m]&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;y [m]&quot;</span><span class="p">)</span>

<span class="c1"># Set simple operation model</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set_operation_model</span><span class="p">(</span><span class="s2">&quot;simple&quot;</span><span class="p">)</span>

<span class="c1"># Evalaute the model and extract the power output</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;simple operation model powers [kW]: &quot;</span><span class="p">,</span> <span class="n">fmodel</span><span class="o">.</span><span class="n">get_turbine_powers</span><span class="p">()</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">)</span>

<span class="c1"># Set the yaw angles (which the &quot;simple&quot; operation model does not use</span>
<span class="c1"># and change the operation model to &quot;cosine-loss&quot;</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">yaw_angles</span><span class="o">=</span><span class="p">[[</span><span class="mf">20.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">]])</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set_operation_model</span><span class="p">(</span><span class="s2">&quot;cosine-loss&quot;</span><span class="p">)</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">layoutviz</span><span class="o">.</span><span class="n">plot_turbine_rotors</span><span class="p">(</span><span class="n">fmodel</span><span class="p">)</span>
<span class="n">layoutviz</span><span class="o">.</span><span class="n">plot_turbine_labels</span><span class="p">(</span><span class="n">fmodel</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;x [m]&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;y [m]&quot;</span><span class="p">)</span>

<span class="c1"># Evaluate again</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="n">powers_cosine_loss</span> <span class="o">=</span> <span class="n">fmodel</span><span class="o">.</span><span class="n">get_turbine_powers</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;cosine-loss operation model powers [kW]: &quot;</span><span class="p">,</span> <span class="n">fmodel</span><span class="o">.</span><span class="n">get_turbine_powers</span><span class="p">()</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>simple operation model powers [kW]:  [[1753.95445918  436.4427005   506.66815478]]
cosine-loss operation model powers [kW]:  [[1561.31837381  778.04338242  651.77709894]]
</pre></div>
</div>
<img alt="_images/e3a49bb7b334d3b694beaf5445827141e52f1324328c447e1c5f244339685ece.png" src="_images/e3a49bb7b334d3b694beaf5445827141e52f1324328c447e1c5f244339685ece.png" />
<img alt="_images/3925461dff180d822dcb033865231582920643308d4f4b57494e8fd7ef5da944.png" src="_images/3925461dff180d822dcb033865231582920643308d4f4b57494e8fd7ef5da944.png" />
</div>
</div>
</section>
<section id="operation-model-library">
<h2>Operation model library<a class="headerlink" href="#operation-model-library" title="Link to this heading">#</a></h2>
<section id="simple-model">
<h3>Simple model<a class="headerlink" href="#simple-model" title="Link to this heading">#</a></h3>
<p>User-level name: <code class="docutils literal notranslate"><span class="pre">&quot;simple&quot;</span></code></p>
<p>Underlying class: <code class="docutils literal notranslate"><span class="pre">SimpleTurbine</span></code></p>
<p>Required data on <code class="docutils literal notranslate"><span class="pre">power_thrust_table</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ref_air_density</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ref_tilt</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wind_speed</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">power</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">thrust_coefficient</span></code> (list)</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">&quot;simple&quot;</span></code> operation model describes the &quot;normal&quot; function of a wind turbine, as described by
its power curve and thrust coefficient. It does not respond to any control setpoints, and is most
often used as a baseline or for users wanting to evaluate wind farms in nominal operation.</p>
</section>
<section id="cosine-loss-model">
<h3>Cosine loss model<a class="headerlink" href="#cosine-loss-model" title="Link to this heading">#</a></h3>
<p>User-level name: <code class="docutils literal notranslate"><span class="pre">&quot;cosine-loss&quot;</span></code></p>
<p>Underlying class: <code class="docutils literal notranslate"><span class="pre">CosineLossTurbine</span></code></p>
<p>Required data on <code class="docutils literal notranslate"><span class="pre">power_thrust_table</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ref_air_density</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ref_tilt</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wind_speed</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">power</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">thrust_coefficient</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cosine_loss_exponent_yaw</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cosine_loss_exponent_tilt</span></code> (scalar)</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">&quot;cosine-loss&quot;</span></code> operation model describes the decrease in power and thrust produced by a
wind turbine as it yaws (or tilts) away from the incoming wind. The thrust is reduced by a factor of
<span class="math notranslate nohighlight">\(\cos \gamma\)</span>, where <span class="math notranslate nohighlight">\(\gamma\)</span> is the yaw misalignment angle, while the power is reduced by a factor
of <span class="math notranslate nohighlight">\((\cos\gamma)^{p_P}\)</span>, where <span class="math notranslate nohighlight">\(p_P\)</span> is the cosine loss exponent, specified by <code class="docutils literal notranslate"><span class="pre">cosine_loss_exponent_yaw</span></code>
(or <code class="docutils literal notranslate"><span class="pre">cosine_loss_exponent_tilt</span></code> for tilt angles). The power and thrust produced by the turbine
thus vary as a function of the turbine's yaw angle, set using the <code class="docutils literal notranslate"><span class="pre">yaw_angles</span></code> argument to
<code class="docutils literal notranslate"><span class="pre">FlorisModel.set()</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">floris</span> <span class="kn">import</span> <span class="n">TimeSeries</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="c1"># Set up the FlorisModel</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set_operation_model</span><span class="p">(</span><span class="s2">&quot;cosine-loss&quot;</span><span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">layout_x</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">],</span> <span class="n">layout_y</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">])</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
    <span class="n">wind_data</span><span class="o">=</span><span class="n">TimeSeries</span><span class="p">(</span>
        <span class="n">wind_speeds</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="o">*</span> <span class="mf">8.0</span><span class="p">,</span>
        <span class="n">wind_directions</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="o">*</span> <span class="mf">270.0</span><span class="p">,</span>
        <span class="n">turbulence_intensities</span><span class="o">=</span><span class="mf">0.06</span>
    <span class="p">)</span>
<span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">reset_operation</span><span class="p">()</span>

<span class="c1"># Sweep the yaw angles</span>
<span class="n">yaw_angles</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">25</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">yaw_angles</span><span class="o">=</span><span class="n">yaw_angles</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

<span class="n">powers</span> <span class="o">=</span> <span class="n">fmodel</span><span class="o">.</span><span class="n">get_turbine_powers</span><span class="p">()</span><span class="o">/</span><span class="mi">1000</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">yaw_angles</span><span class="p">,</span> <span class="n">powers</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Yaw angle [deg]&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Power [kW]&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0, 0.5, &#39;Power [kW]&#39;)
</pre></div>
</div>
<img alt="_images/83276a797514af536addd8322b8c00878856f690c341347e80fe48fafee60d74.png" src="_images/83276a797514af536addd8322b8c00878856f690c341347e80fe48fafee60d74.png" />
</div>
</div>
</section>
<section id="simple-derating-model">
<h3>Simple derating model<a class="headerlink" href="#simple-derating-model" title="Link to this heading">#</a></h3>
<p>User-level name: <code class="docutils literal notranslate"><span class="pre">&quot;simple-derating&quot;</span></code></p>
<p>Underlying class: <code class="docutils literal notranslate"><span class="pre">SimpleDeratingTurbine</span></code></p>
<p>Required data on <code class="docutils literal notranslate"><span class="pre">power_thrust_table</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ref_air_density</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ref_tilt</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wind_speed</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">power</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">thrust_coefficient</span></code> (list)</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">&quot;simple-derating&quot;</span></code> operation model enables users to derate turbines by setting a new power
rating. It does not require any extra parameters on the <code class="docutils literal notranslate"><span class="pre">power_thrust_table</span></code>, but adescribes the
decrease in power and thrust produced by providing the <code class="docutils literal notranslate"><span class="pre">power_setpoints</span></code> argument to
<code class="docutils literal notranslate"><span class="pre">FlorisModel.set()</span></code>. The default power rating for the turbine can be acheived by setting the
appropriate entries of <code class="docutils literal notranslate"><span class="pre">power_setpoints</span></code> to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set up the FlorisModel</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set_operation_model</span><span class="p">(</span><span class="s2">&quot;simple-derating&quot;</span><span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">reset_operation</span><span class="p">()</span>
<span class="n">wind_speeds</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
    <span class="n">wind_data</span><span class="o">=</span><span class="n">TimeSeries</span><span class="p">(</span>
        <span class="n">wind_speeds</span><span class="o">=</span><span class="n">wind_speeds</span><span class="p">,</span>
        <span class="n">wind_directions</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="o">*</span> <span class="mf">270.0</span><span class="p">,</span>
        <span class="n">turbulence_intensities</span><span class="o">=</span><span class="mf">0.06</span>
    <span class="p">)</span>
<span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="k">for</span> <span class="n">power_setpoint</span> <span class="ow">in</span> <span class="p">[</span><span class="mf">5.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">]:</span>
    <span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">power_setpoints</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="n">power_setpoint</span><span class="o">*</span><span class="mf">1e6</span><span class="p">]]</span><span class="o">*</span><span class="mi">100</span><span class="p">))</span>
    <span class="n">fmodel</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
    <span class="n">powers</span> <span class="o">=</span> <span class="n">fmodel</span><span class="o">.</span><span class="n">get_turbine_powers</span><span class="p">()</span><span class="o">/</span><span class="mi">1000</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">wind_speeds</span><span class="p">,</span> <span class="n">powers</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Power setpoint (MW): </span><span class="si">{</span><span class="n">power_setpoint</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Wind speed [m/s]&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Power [kW]&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/home/runner/work/floris/floris/floris/core/turbine/operation_models.py:358: RuntimeWarning: divide by zero encountered in divide
  power_fractions = power_setpoints / base_powers
/home/runner/work/floris/floris/floris/core/wake_deflection/gauss.py:328: RuntimeWarning: invalid value encountered in divide
  val = 2 * (avg_v - v_core) / (v_top + v_bottom)
/home/runner/work/floris/floris/floris/core/wake_deflection/gauss.py:163: RuntimeWarning: invalid value encountered in divide
  C0 = 1 - u0 / freestream_velocity
/home/runner/work/floris/floris/floris/core/wake_velocity/gauss.py:80: RuntimeWarning: invalid value encountered in divide
  sigma_z0 = rotor_diameter_i * 0.5 * np.sqrt(uR / (u_initial + u0))
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0, 0.5, &#39;Power [kW]&#39;)
</pre></div>
</div>
<img alt="_images/49bc96f03a865d25f407cf894f18cd604e0b332739fe11b0b0c087a61b84aaf9.png" src="_images/49bc96f03a865d25f407cf894f18cd604e0b332739fe11b0b0c087a61b84aaf9.png" />
</div>
</div>
</section>
<section id="mixed-operation-model">
<h3>Mixed operation model<a class="headerlink" href="#mixed-operation-model" title="Link to this heading">#</a></h3>
<p>User-level name: <code class="docutils literal notranslate"><span class="pre">&quot;mixed&quot;</span></code></p>
<p>Underlying class: <code class="docutils literal notranslate"><span class="pre">MixedOperationTurbine</span></code></p>
<p>Required data on <code class="docutils literal notranslate"><span class="pre">power_thrust_table</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ref_air_density</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ref_tilt</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wind_speed</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">power</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">thrust_coefficient</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cosine_loss_exponent_yaw</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cosine_loss_exponent_tilt</span></code> (scalar)</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">&quot;mixed&quot;</span></code> operation model allows users to specify <em>either</em> <code class="docutils literal notranslate"><span class="pre">yaw_angles</span></code> (evaluated using the
<code class="docutils literal notranslate"><span class="pre">&quot;cosine-loss&quot;</span></code> operation model) <em>or</em> <code class="docutils literal notranslate"><span class="pre">power_setpoints</span></code> (evaluated using the <code class="docutils literal notranslate"><span class="pre">&quot;simple-derating&quot;</span></code>
operation model). That is, for each turbine, and at each <code class="docutils literal notranslate"><span class="pre">findex</span></code>, a non-zero yaw angle or a
non-<code class="docutils literal notranslate"><span class="pre">None</span></code> power setpoint may be specified. However, specifying both a non-zero yaw angle and a
finite power setpoint for the same turbine and at the same <code class="docutils literal notranslate"><span class="pre">findex</span></code> will produce an error.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fmodel</span><span class="o">.</span><span class="n">set_operation_model</span><span class="p">(</span><span class="s2">&quot;mixed&quot;</span><span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">layout_x</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="n">layout_y</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">500.0</span><span class="p">])</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">reset_operation</span><span class="p">()</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
    <span class="n">wind_data</span><span class="o">=</span><span class="n">TimeSeries</span><span class="p">(</span>
        <span class="n">wind_speeds</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">10.0</span><span class="p">]),</span>
        <span class="n">wind_directions</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">270.0</span><span class="p">]),</span>
        <span class="n">turbulence_intensities</span><span class="o">=</span><span class="mf">0.06</span>
    <span class="p">)</span>
<span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
    <span class="n">yaw_angles</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">20.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]]),</span>
    <span class="n">power_setpoints</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="kc">None</span><span class="p">,</span> <span class="mf">2e6</span><span class="p">]])</span>
<span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Powers [kW]: &quot;</span><span class="p">,</span> <span class="n">fmodel</span><span class="o">.</span><span class="n">get_turbine_powers</span><span class="p">()</span><span class="o">/</span><span class="mi">1000</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Powers [kW]:  [[3063.49046772 2000.        ]]
</pre></div>
</div>
</div>
</div>
</section>
<section id="awc-model">
<h3>AWC model<a class="headerlink" href="#awc-model" title="Link to this heading">#</a></h3>
<p>User-level name: <code class="docutils literal notranslate"><span class="pre">&quot;awc&quot;</span></code></p>
<p>Underlying class: <code class="docutils literal notranslate"><span class="pre">AWCTurbine</span></code></p>
<p>Required data on <code class="docutils literal notranslate"><span class="pre">power_thrust_table</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ref_air_density</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ref_tilt</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wind_speed</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">power</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">thrust_coefficient</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">helix_a</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">helix_power_b</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">helix_power_c</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">helix_thrust_b</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">helix_thrust_c</span></code> (scalar)</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">&quot;awc&quot;</span></code> operation model allows for users to define <em>active wake control</em> strategies. These strategies
use pitch control to actively enhance wake mixing and subsequently decrease wake velocity deficits. As a
result, downstream turbines can increase their power production, with limited power loss for the controlled
upstream turbine. The <code class="docutils literal notranslate"><span class="pre">AWCTurbine</span></code> class models this power loss at the turbine applying AWC. For each
turbine, the user can define an AWC strategy to implement through the <code class="docutils literal notranslate"><span class="pre">awc_modes</span></code> array. Note that currently,
only <code class="docutils literal notranslate"><span class="pre">&quot;baseline&quot;</span></code>, i.e., no AWC, and <code class="docutils literal notranslate"><span class="pre">&quot;helix&quot;</span></code>, i.e., the
<a class="reference external" href="https://doi.org/10.1002/we.2513">counterclockwise helix method</a> have been implemented.</p>
<p>The user then defines the exact AWC implementation through setting the variable <code class="docutils literal notranslate"><span class="pre">awc_amplitudes</span></code> for
each turbine. This variable defines the mean-to-peak amplitude of the sinusoidal AWC pitch excitation,
i.e., for a turbine that under <code class="docutils literal notranslate"><span class="pre">awc_modes</span> <span class="pre">=</span> <span class="pre">&quot;baseline&quot;</span></code> has a constant pitch angle of 0 degrees, setting
<code class="docutils literal notranslate"><span class="pre">awc_amplitude</span> <span class="pre">=</span> <span class="pre">2</span></code> results in a pitch signal varying from -2 to 2 degrees over the desired Strouhal
frequency. This Strouhal frequency is not used as an input here, since it has minimal influence on turbine
power production. Note that setting <code class="docutils literal notranslate"><span class="pre">awc_amplitudes</span> <span class="pre">=</span> <span class="pre">0</span></code> effectively disables AWC and is therefore the same
as running a turbine at <code class="docutils literal notranslate"><span class="pre">awc_modes</span> <span class="pre">=</span> <span class="pre">&quot;baseline&quot;</span></code>.</p>
<p>Each example turbine input file <code class="docutils literal notranslate"><span class="pre">floris/turbine_library/*.yaml</span></code> has its own <code class="docutils literal notranslate"><span class="pre">helix_*</span></code> parameter data. These
parameters are determined by fitting data from <code class="docutils literal notranslate"><span class="pre">OpenFAST</span></code> simulations in region II to the following equation:</p>
<div class="math notranslate nohighlight">
\[
    P_\text{AWC} = P_\text{baseline} \cdot (1 - (b + c \cdot P_\text{baseline} ) \cdot A_\text{AWC}^a)
\]</div>
<p>where <span class="math notranslate nohighlight">\(a\)</span> is <code class="docutils literal notranslate"><span class="pre">&quot;helix_a&quot;</span></code>, <span class="math notranslate nohighlight">\(b\)</span> is <code class="docutils literal notranslate"><span class="pre">&quot;helix_power_b&quot;</span></code>, <span class="math notranslate nohighlight">\(c\)</span> is <code class="docutils literal notranslate"><span class="pre">&quot;helix_power_c&quot;</span></code>, and <span class="math notranslate nohighlight">\(A_\text{AWC}\)</span> is <code class="docutils literal notranslate"><span class="pre">awc_amplitudes</span></code>.
The thrust coefficient follows the same equation, but with the respective thrust parameters. When AWC is
turned on while <span class="math notranslate nohighlight">\(P_\text{baseline} &gt; P_\text{rated}\)</span>, a warning is given as the model is not yet tuned for region III.</p>
<p>The figure below shows the fit between the turbine power and thrust in OpenFAST helix AWC simulations (x)
and FLORIS simulations (--) at different region II wind speeds for the NREL 5MW reference turbine.</p>
<!--<img src="powerthrust_helix.png" width="600px">-->
<p><img alt="" src="_images/powerthrust_helix.png" /></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fmodel</span> <span class="o">=</span> <span class="n">FlorisModel</span><span class="p">(</span><span class="s2">&quot;../examples/inputs/emgauss_helix.yaml&quot;</span><span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set_operation_model</span><span class="p">(</span><span class="s2">&quot;awc&quot;</span><span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">layout_x</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="n">layout_y</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">500.0</span><span class="p">])</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">reset_operation</span><span class="p">()</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
    <span class="n">wind_speeds</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">8.0</span><span class="p">]),</span>
    <span class="n">wind_directions</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">270.0</span><span class="p">]),</span>
    <span class="n">turbulence_intensities</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.06</span><span class="p">])</span>
<span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
    <span class="n">awc_modes</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="s2">&quot;helix&quot;</span><span class="p">,</span> <span class="s2">&quot;baseline&quot;</span><span class="p">]]),</span>
    <span class="n">awc_amplitudes</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">2.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>
<span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Powers [kW]: &quot;</span><span class="p">,</span> <span class="n">fmodel</span><span class="o">.</span><span class="n">get_turbine_powers</span><span class="p">()</span><span class="o">/</span><span class="mi">1000</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Powers [kW]:  [[6133.16222884 6301.1399872 ]]
</pre></div>
</div>
</div>
</div>
</section>
<section id="peak-shaving-model">
<h3>Peak shaving model<a class="headerlink" href="#peak-shaving-model" title="Link to this heading">#</a></h3>
<p>User-level name: <code class="docutils literal notranslate"><span class="pre">&quot;peak-shaving&quot;</span></code></p>
<p>Underlying class: <code class="docutils literal notranslate"><span class="pre">PeakShavingTurbine</span></code></p>
<p>Required data on <code class="docutils literal notranslate"><span class="pre">power_thrust_table</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ref_air_density</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ref_tilt</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wind_speed</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">power</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">thrust_coefficient</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">peak_shaving_fraction</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">peak_shaving_TI_threshold</span></code> (scalar)</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">&quot;peak-shaving&quot;</span></code> operation model allows users to implement peak shaving, where the thrust
of the wind turbine is reduced from the nominal curve near rated to reduce unwanted structural
loading. Peak shaving here is implemented here by reducing the thrust by a fixed fraction from
the peak thrust on the nominal thrust curve, as specified by <code class="docutils literal notranslate"><span class="pre">peak_shaving_fraction</span></code>.This only
affects wind speeds near the peak in the thrust
curve (usually near rated wind speed), as thrust values away from the peak will be below the
fraction regardless. Further, peak shaving is only applied if the turbulence intensity experienced
by the turbine meets the <code class="docutils literal notranslate"><span class="pre">peak_shaving_TI_threshold</span></code>. To apply peak shaving in all wind conditions,
<code class="docutils literal notranslate"><span class="pre">peak_shaving_TI_threshold</span></code> may be set to zero.</p>
<p>When the turbine is peak shaving to reduce thrust, the power output is updated accordingly. Letting
<span class="math notranslate nohighlight">\(C_{T}\)</span> represent the thrust coefficient when peak shaving (at given wind speed), and <span class="math notranslate nohighlight">\(C_{T}'\)</span>
represent the thrust coefficient that the turbine would be operating at under nominal control, then
the power <span class="math notranslate nohighlight">\(P\)</span> due to peak shaving (compared to the power <span class="math notranslate nohighlight">\(P'\)</span> available under nominal control) is
computed (based on actuator disk theory) as</p>
<div class="math notranslate nohighlight">
\[ P = \frac{C_T (1 - a)}{C_T' (1 - a')} P'\]</div>
<p>where <span class="math notranslate nohighlight">\(a\)</span> (respectively, <span class="math notranslate nohighlight">\(a'\)</span>) is the axial induction factor corresponding to <span class="math notranslate nohighlight">\(C_T\)</span>
(respectively, <span class="math notranslate nohighlight">\(C_T'\)</span>), computed using the usual relationship from actuator disk theory,
i.e. the lesser solution to <span class="math notranslate nohighlight">\(C_T=4a(1-a)\)</span>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set up the FlorisModel</span>
<span class="n">fmodel</span> <span class="o">=</span> <span class="n">FlorisModel</span><span class="p">(</span><span class="s2">&quot;../examples/inputs/gch.yaml&quot;</span><span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
    <span class="n">layout_x</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">],</span> <span class="n">layout_y</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">],</span>
    <span class="n">wind_data</span><span class="o">=</span><span class="n">TimeSeries</span><span class="p">(</span>
        <span class="n">wind_speeds</span><span class="o">=</span><span class="n">wind_speeds</span><span class="p">,</span>
        <span class="n">wind_directions</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="o">*</span> <span class="mf">270.0</span><span class="p">,</span>
        <span class="n">turbulence_intensities</span><span class="o">=</span><span class="mf">0.2</span> <span class="c1"># Higher than threshold value of 0.1</span>
    <span class="p">)</span>
<span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">reset_operation</span><span class="p">()</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set_operation_model</span><span class="p">(</span><span class="s2">&quot;simple&quot;</span><span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="n">powers_base</span> <span class="o">=</span> <span class="n">fmodel</span><span class="o">.</span><span class="n">get_turbine_powers</span><span class="p">()</span><span class="o">/</span><span class="mi">1000</span>
<span class="n">thrust_coefficients_base</span> <span class="o">=</span> <span class="n">fmodel</span><span class="o">.</span><span class="n">get_turbine_thrust_coefficients</span><span class="p">()</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set_operation_model</span><span class="p">(</span><span class="s2">&quot;peak-shaving&quot;</span><span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="n">powers_peak_shaving</span> <span class="o">=</span> <span class="n">fmodel</span><span class="o">.</span><span class="n">get_turbine_powers</span><span class="p">()</span><span class="o">/</span><span class="mi">1000</span>
<span class="n">thrust_coefficients_peak_shaving</span> <span class="o">=</span> <span class="n">fmodel</span><span class="o">.</span><span class="n">get_turbine_thrust_coefficients</span><span class="p">()</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">wind_speeds</span><span class="p">,</span> <span class="n">thrust_coefficients_base</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Without peak shaving&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">wind_speeds</span><span class="p">,</span> <span class="n">thrust_coefficients_peak_shaving</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;With peak shaving&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;C0&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">wind_speeds</span><span class="p">,</span> <span class="n">powers_base</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Without peak shaving&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">wind_speeds</span><span class="p">,</span> <span class="n">powers_peak_shaving</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;With peak shaving&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;C0&quot;</span><span class="p">)</span>

<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Thrust coefficient [-]&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Wind speed [m/s]&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Power [kW]&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0, 0.5, &#39;Power [kW]&#39;)
</pre></div>
</div>
<img alt="_images/52300d1b0d84a03aced2ad260642066d29a4842123967cc70280357fad4962c6.png" src="_images/52300d1b0d84a03aced2ad260642066d29a4842123967cc70280357fad4962c6.png" />
</div>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="turbine_interaction.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Turbine Library Interface</p>
      </div>
    </a>
    <a class="right-next"
       href="layout_optimization.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Layout Optimization</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#selecting-the-operation-model">Selecting the operation model</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#operation-model-library">Operation model library</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#simple-model">Simple model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cosine-loss-model">Cosine loss model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#simple-derating-model">Simple derating model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mixed-operation-model">Mixed operation model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#awc-model">AWC model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#peak-shaving-model">Peak shaving model</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By National Renewable Energy Laboratory
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549"></script>
<script defer src="_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>