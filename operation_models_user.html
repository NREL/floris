
<!DOCTYPE html>


<html lang="python" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Turbine Operation Models &#8212; FLORIS</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=30a733bc"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-JV2SK7CNPR"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-JV2SK7CNPR');
            </script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-JV2SK7CNPR');
            </script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'operation_models_user';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Layout Optimization" href="layout_optimization.html" />
    <link rel="prev" title="Turbine Library Interface" href="turbine_interaction.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="python"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/docs_image.png" class="logo__image only-light" alt="FLORIS - Home"/>
    <script>document.write(`<img src="_static/docs_image.png" class="logo__image only-dark" alt="FLORIS - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="index.html">
                    FLORIS Wake Modeling & Wind Farm Controls
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="v3_to_v4.html">Switching from FLORIS v3 to v4</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">User Reference</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="intro_concepts.html">Introductory Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="wind_data_user.html">Wind Data Objects</a></li>

<li class="toctree-l1"><a class="reference internal" href="floris_models.html">FLORIS Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_concepts.html">Advanced Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="heterogeneous_map.html">Heterogeneous Map</a></li>
<li class="toctree-l1"><a class="reference internal" href="floating_wind_turbine.html">Floating Wind Turbine Modeling</a></li>
<li class="toctree-l1"><a class="reference internal" href="turbine_interaction.html">Turbine Library Interface</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Turbine Operation Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="layout_optimization.html">Layout Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="input_reference_main.html">Main Input File Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="input_reference_turbine.html">Turbine Input File Reference</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Theory and Background</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="wake_models.html">Wake Models</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="empirical_gauss_model.html">Empirical Gaussian model</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="bibliography.html">Bibliography</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Developer Reference</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="dev_guide.html">Developer's Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture and Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="code_quality.html">Code Quality</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="api_docs.html">API Documentation</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.flow_visualization.html">floris.flow_visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.floris_model.html">floris.floris_model</a></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.wind_data.html">floris.wind_data</a></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.uncertain_floris_model.html">floris.uncertain_floris_model</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="_autosummary/floris.turbine_library.html">floris.turbine_library</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/floris.turbine_library.turbine_previewer.html">floris.turbine_library.turbine_previewer</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/floris.turbine_library.turbine_utilities.html">floris.turbine_library.turbine_utilities</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.parallel_floris_model.html">floris.parallel_floris_model</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="_autosummary/floris.optimization.html">floris.optimization</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/floris.optimization.layout_optimization.html">floris.optimization.layout_optimization</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.layout_optimization.layout_optimization_base.html">floris.optimization.layout_optimization.layout_optimization_base</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.layout_optimization.layout_optimization_boundary_grid.html">floris.optimization.layout_optimization.layout_optimization_boundary_grid</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.layout_optimization.layout_optimization_gridded.html">floris.optimization.layout_optimization.layout_optimization_gridded</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.layout_optimization.layout_optimization_pyoptsparse.html">floris.optimization.layout_optimization.layout_optimization_pyoptsparse</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.layout_optimization.layout_optimization_pyoptsparse_spread.html">floris.optimization.layout_optimization.layout_optimization_pyoptsparse_spread</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.layout_optimization.layout_optimization_random_search.html">floris.optimization.layout_optimization.layout_optimization_random_search</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.layout_optimization.layout_optimization_scipy.html">floris.optimization.layout_optimization.layout_optimization_scipy</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/floris.optimization.other.html">floris.optimization.other</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.other.boundary_grid.html">floris.optimization.other.boundary_grid</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/floris.optimization.yaw_optimization.html">floris.optimization.yaw_optimization</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.yaw_optimization.yaw_optimization_base.html">floris.optimization.yaw_optimization.yaw_optimization_base</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.yaw_optimization.yaw_optimization_tools.html">floris.optimization.yaw_optimization.yaw_optimization_tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.yaw_optimization.yaw_optimizer_geometric.html">floris.optimization.yaw_optimization.yaw_optimizer_geometric</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.yaw_optimization.yaw_optimizer_scipy.html">floris.optimization.yaw_optimization.yaw_optimizer_scipy</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.optimization.yaw_optimization.yaw_optimizer_sr.html">floris.optimization.yaw_optimization.yaw_optimizer_sr</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.layout_visualization.html">floris.layout_visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.cut_plane.html">floris.cut_plane</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="_autosummary/floris.core.html">floris.core</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/floris.core.base.html">floris.core.base</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/floris.core.core.html">floris.core.core</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/floris.core.farm.html">floris.core.farm</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/floris.core.flow_field.html">floris.core.flow_field</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/floris.core.grid.html">floris.core.grid</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/floris.core.rotor_velocity.html">floris.core.rotor_velocity</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/floris.core.solver.html">floris.core.solver</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/floris.core.turbine.html">floris.core.turbine</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.core.turbine.controller_dependent_operation_model.html">floris.core.turbine.controller_dependent_operation_model</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.core.turbine.operation_models.html">floris.core.turbine.operation_models</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.core.turbine.turbine.html">floris.core.turbine.turbine</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.core.turbine.unified_momentum_model.html">floris.core.turbine.unified_momentum_model</a></li>
</ul>
</details></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/floris.core.wake.html">floris.core.wake</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/floris.core.wake_combination.html">floris.core.wake_combination</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.core.wake_combination.fls.html">floris.core.wake_combination.fls</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.core.wake_combination.max.html">floris.core.wake_combination.max</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.core.wake_combination.sosfs.html">floris.core.wake_combination.sosfs</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/floris.core.wake_deflection.html">floris.core.wake_deflection</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.core.wake_deflection.empirical_gauss.html">floris.core.wake_deflection.empirical_gauss</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.core.wake_deflection.gauss.html">floris.core.wake_deflection.gauss</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.core.wake_deflection.jimenez.html">floris.core.wake_deflection.jimenez</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.core.wake_deflection.none.html">floris.core.wake_deflection.none</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/floris.core.wake_turbulence.html">floris.core.wake_turbulence</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.core.wake_turbulence.crespo_hernandez.html">floris.core.wake_turbulence.crespo_hernandez</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.core.wake_turbulence.none.html">floris.core.wake_turbulence.none</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.core.wake_turbulence.wake_induced_mixing.html">floris.core.wake_turbulence.wake_induced_mixing</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/floris.core.wake_velocity.html">floris.core.wake_velocity</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.core.wake_velocity.cumulative_gauss_curl.html">floris.core.wake_velocity.cumulative_gauss_curl</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.core.wake_velocity.empirical_gauss.html">floris.core.wake_velocity.empirical_gauss</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.core.wake_velocity.gauss.html">floris.core.wake_velocity.gauss</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.core.wake_velocity.jensen.html">floris.core.wake_velocity.jensen</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.core.wake_velocity.none.html">floris.core.wake_velocity.none</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.core.wake_velocity.turbopark.html">floris.core.wake_velocity.turbopark</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/floris.core.wake_velocity.turboparkgauss.html">floris.core.wake_velocity.turboparkgauss</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.convert_turbine_v3_to_v4.html">floris.convert_turbine_v3_to_v4</a></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.convert_floris_input_v3_to_v4.html">floris.convert_floris_input_v3_to_v4</a></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.utilities.html">floris.utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.type_dec.html">floris.type_dec</a></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/floris.logging_manager.html">floris.logging_manager</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/001_opening_floris_computing_power.html">Example 1: Opening FLORIS and Computing Power</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/002_visualizations.html">Example 2: Visualizations</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/003_wind_data_objects.html">Example 3: Wind Data Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/004_set.html">Example 4: Set</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/005_getting_power.html">Example 5: Getting Turbine and Farm Power</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/006_get_farm_aep.html">Example 6: Getting Expected Power and AEP</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/007_sweeping_variables.html">Example 7: Sweeping Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/008_uncertain_models.html">Example 8: Uncertain Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/009_parallel_models.html">Example 9: Parallel Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/010_compare_farm_power_with_neighbor.html">Example 10: Compare farm power with neighboring farm</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples - Control optimization</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/examples_control_optimization/001_opt_yaw_single_ws.html">Example: Optimize yaw for a single wind speed and multiple wind directions</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_control_optimization/002_opt_yaw_single_ws_uncertain.html">Example: Optimize yaw for a single wind speed and multiple wind directions.</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_control_optimization/003_opt_yaw_multiple_ws.html">Example: Optimize yaw for multiple wind directions and multiple wind speeds.</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_control_optimization/004_optimize_yaw_aep.html">Example: Optimize yaw and compare AEP</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_control_optimization/005_optimize_yaw_aep_parallel.html">Example: Optimize yaw and compare AEP in parallel</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_control_optimization/006_compare_yaw_optimizers.html">Example: Compare yaw optimizers</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_control_optimization/007_optimize_yaw_with_neighbor_farms.html">Example: Optimize yaw with neighbor farm</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_control_optimization/008_optimize_yaw_with_disabled_turbines.html">Example: Optimizing yaw angles with disabled turbines</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples - Control types</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/examples_control_types/001_derating_control.html">Example of using the simple-derating control model in FLORIS.</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_control_types/002_disable_turbines.html">Example: Disabling turbines</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_control_types/003_setting_yaw_and_disabling.html">Example: Setting yaw angles and disabling turbine</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_control_types/004_helix_active_wake_mixing.html">Example: Helix active wake mixing</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_control_types/005_peak_shaving.html">Example of using the peak-shaving turbine operation model.</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples - Emgauss</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/examples_emgauss/001_empirical_gauss_velocity_deficit_parameters.html">Example: Empirical Gaussian velocity deficit parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_emgauss/002_empirical_gauss_deflection_parameters.html">Example: Empirical Gaussian deflection parameters</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples - Floating</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/examples_floating/001_floating_turbine_models.html">Example: Floating turbines</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_floating/002_floating_vs_fixedbottom_farm.html">Example: Floating vs fixed-bottom farm</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_floating/003_tilt_driven_vertical_wake_deflection.html">Example: Tilt-driven vertical wake deflection</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples - Get flow</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/examples_get_flow/001_extract_wind_speed_at_turbines.html">Example: Extract wind speed at turbines</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_get_flow/002_extract_wind_speed_at_points.html">Example: Extract wind speed at points</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_get_flow/003_plot_velocity_deficit_profiles.html">Example: Plot velocity deficit profiles</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples - Heterogeneous</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/examples_heterogeneous/001_heterogeneous_inflow_single.html">Example: Heterogeneous Inflow for single case</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_heterogeneous/002_heterogeneous_using_wind_data.html">Example: Heterogeneous Inflow using wind data</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_heterogeneous/003_heterogeneous_speedup_by_wd_and_ws.html">Example: Heterogeneous Speedup by Wind Direction and Wind Speed</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_heterogeneous/004_heterogeneous_2d_and_3d.html">Example: Heterogeneous Inflow in 2D and 3D</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples - Layout optimization</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/examples_layout_optimization/001_optimize_layout.html">Example: Optimize Layout</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_layout_optimization/002_optimize_layout_with_heterogeneity.html">Example: Layout optimization with heterogeneous inflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_layout_optimization/003_genetic_random_search.html">Example: Layout optimization with genetic random search</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_layout_optimization/004_generate_gridded_layout.html">Example: Gridded layout design</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_layout_optimization/005_layout_optimization_complex_boundary.html">Example: Separated boundaries layout optimization</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples - Multidim</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/examples_multidim/001_multi_dimensional_cp_ct.html">Example: Multi-dimensional Cp/Ct data</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_multidim/002_multi_dimensional_cp_ct_2Hs.html">Example: Multi-dimensional Cp/Ct with 2 Hs values</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples - Operation models</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/examples_operation_models/001_compare_yaw_loss.html"></a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples - Turbine</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/examples_turbine/001_check_turbine.html">Example: Check turbine power curves</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_turbine/002_multiple_turbine_types.html">Example: Multiple turbine types</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_turbine/003_specify_turbine_power_curve.html">Example: Specify turbine power curve</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples - Turbopark</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/examples_turbopark/001_compare_turbopark_implementations.html">Example: Compare TurbOPark model implementations</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples - Uncertain</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/examples_uncertain/001_uncertain_model_params.html">Example: Uncertain Model Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_uncertain/002_approx_floris_model.html">Example: Approximate Model Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_uncertain/003_uncertain_model_with_parallelization.html">Example: Uncertain Model With Parallelization</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples - Visualizations</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/examples_visualizations/001_layout_visualizations.html">Example: Layout Visualizations</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_visualizations/002_visualize_y_cut_plane.html">Example: Visualize y cut plane</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_visualizations/003_visualize_cross_plane.html">Example: Visualize cross plane</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_visualizations/004_visualize_rotor_values.html">Example: Visualize rotor velocities</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_visualizations/005_visualize_flow_by_sweeping_turbines.html">Example: Visualize flow by sweeping turbines</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples - Wind data</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/examples_wind_data/001_wind_data_comparisons.html">Example: Wind Data Comparisons</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_wind_data/002_generate_ti.html">Example: Generate TI</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_wind_data/003_generate_value.html">Example: Generate value</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples - Wind resource grid</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="examples/examples_wind_resource_grid/000_generate_example_wrg.html">Example: Generate Example WRG File</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_wind_resource_grid/001_wind_rose_wrg.html">Example: WindRoseWRG</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_wind_resource_grid/002_set_floris_with_wrg.html">Example: Setting FLORIS with WindRoseWRG</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_wind_resource_grid/003_wrg_compar_layout_optimization.html">Example: Layout optimization with WindRoseWRG comparison</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/NREL/floris" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/NREL/floris/edit/main/docs/operation_models_user.ipynb" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/NREL/floris/issues/new?title=Issue%20on%20page%20%2Foperation_models_user.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/operation_models_user.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Turbine Operation Models</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#selecting-the-operation-model">Selecting the operation model</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#operation-model-library">Operation model library</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#simple-model">Simple model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cosine-loss-model">Cosine loss model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#simple-derating-model">Simple derating model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mixed-operation-model">Mixed operation model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#awc-model">AWC model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#peak-shaving-model">Peak shaving model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#controller-dependent-model">Controller-dependent model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#unified-momentum-model">Unified Momentum Model</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="turbine-operation-models">
<h1>Turbine Operation Models<a class="headerlink" href="#turbine-operation-models" title="Link to this heading">#</a></h1>
<p>Separate from the turbine models, which define the physical characterstics of the turbines, FLORIS
allows users to specify how the turbine behaves in terms of producing power and thurst. We refer to
different models for turbine behavior as &quot;operation models&quot;. A key feature of operation models is
the ability for users to specify control setpoints at which the operation model will be evaluated.
For instance, some operation models allow users to specify <code class="docutils literal notranslate"><span class="pre">yaw_angles</span></code>, which alter the power
being produced by the turbine along with it's thrust force on flow.</p>
<p>Operation models are specified by the <code class="docutils literal notranslate"><span class="pre">operation_model</span></code> key on the turbine yaml file, or by using
the <code class="docutils literal notranslate"><span class="pre">set_operation_model()</span></code> method on <code class="docutils literal notranslate"><span class="pre">FlorisModel</span></code>. Each operation model available in FLORIS is
described and demonstrated below. The simplest operation model is the <code class="docutils literal notranslate"><span class="pre">&quot;simple&quot;</span></code> operation model,
which takes no control setpoints and simply evaluates the power and thrust coefficient curves for
the turbine at the current wind condition. The default operation model is the <code class="docutils literal notranslate"><span class="pre">&quot;cosine-loss&quot;</span></code>
operation model, which models the loss in power of a turbine under yaw misalignment using a cosine
term with an exponent.</p>
<p>We first provide a quick demonstration of how to switch between different operation models. Then,
each operation model available in FLORIS is described, along with its relevant control setpoints.
We also describe the different parameters that must be specified in the turbine
<code class="docutils literal notranslate"><span class="pre">&quot;power_thrust_table&quot;</span></code> dictionary in order to use that operation model.</p>
<section id="selecting-the-operation-model">
<h2>Selecting the operation model<a class="headerlink" href="#selecting-the-operation-model" title="Link to this heading">#</a></h2>
<p>There are two options for selecting the operation model:</p>
<ol class="arabic simple">
<li><p>Manually changing the <code class="docutils literal notranslate"><span class="pre">&quot;operation_model&quot;</span></code> field of the turbine input yaml
(see <a class="reference internal" href="input_reference_turbine.html"><span class="doc std std-doc">Turbine Input File Reference</span></a>)</p></li>
<li><p>Using <code class="docutils literal notranslate"><span class="pre">set_operation_model()</span></code> on an instantiated <code class="docutils literal notranslate"><span class="pre">FlorisModel</span></code> object.</p></li>
</ol>
<p>The following code demonstrates the use of the second option.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">floris</span><span class="w"> </span><span class="kn">import</span> <span class="n">FlorisModel</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">floris</span><span class="w"> </span><span class="kn">import</span> <span class="n">layout_visualization</span> <span class="k">as</span> <span class="n">layoutviz</span>

<span class="n">fmodel</span> <span class="o">=</span> <span class="n">FlorisModel</span><span class="p">(</span><span class="s2">&quot;../examples/inputs/gch.yaml&quot;</span><span class="p">)</span>

<span class="c1"># Look at layout</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">layoutviz</span><span class="o">.</span><span class="n">plot_turbine_rotors</span><span class="p">(</span><span class="n">fmodel</span><span class="p">)</span>
<span class="n">layoutviz</span><span class="o">.</span><span class="n">plot_turbine_labels</span><span class="p">(</span><span class="n">fmodel</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;x [m]&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;y [m]&quot;</span><span class="p">)</span>

<span class="c1"># Set simple operation model</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set_operation_model</span><span class="p">(</span><span class="s2">&quot;simple&quot;</span><span class="p">)</span>

<span class="c1"># Evalaute the model and extract the power output</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;simple operation model powers [kW]: &quot;</span><span class="p">,</span> <span class="n">fmodel</span><span class="o">.</span><span class="n">get_turbine_powers</span><span class="p">()</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">)</span>

<span class="c1"># Set the yaw angles (which the &quot;simple&quot; operation model does not use</span>
<span class="c1"># and change the operation model to &quot;cosine-loss&quot;</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">yaw_angles</span><span class="o">=</span><span class="p">[[</span><span class="mf">20.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">]])</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set_operation_model</span><span class="p">(</span><span class="s2">&quot;cosine-loss&quot;</span><span class="p">)</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">layoutviz</span><span class="o">.</span><span class="n">plot_turbine_rotors</span><span class="p">(</span><span class="n">fmodel</span><span class="p">)</span>
<span class="n">layoutviz</span><span class="o">.</span><span class="n">plot_turbine_labels</span><span class="p">(</span><span class="n">fmodel</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;x [m]&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;y [m]&quot;</span><span class="p">)</span>

<span class="c1"># Evaluate again</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="n">powers_cosine_loss</span> <span class="o">=</span> <span class="n">fmodel</span><span class="o">.</span><span class="n">get_turbine_powers</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;cosine-loss operation model powers [kW]: &quot;</span><span class="p">,</span> <span class="n">fmodel</span><span class="o">.</span><span class="n">get_turbine_powers</span><span class="p">()</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>simple operation model powers [kW]:  [[1753.95445918  436.4427005   506.66815478]]
cosine-loss operation model powers [kW]:  [[1561.31837381  778.04338242  651.77709894]]
</pre></div>
</div>
<img alt="_images/8bafda1720a06b14045d5596a0346c80cb7bf6a8cd7a7b064f2f9a85d81c0350.png" src="_images/8bafda1720a06b14045d5596a0346c80cb7bf6a8cd7a7b064f2f9a85d81c0350.png" />
<img alt="_images/7dc30fc54ba1e8f6ee7232ff7546c7493d53fa5162cd5bf5afc672c759724ee9.png" src="_images/7dc30fc54ba1e8f6ee7232ff7546c7493d53fa5162cd5bf5afc672c759724ee9.png" />
</div>
</div>
</section>
<section id="operation-model-library">
<h2>Operation model library<a class="headerlink" href="#operation-model-library" title="Link to this heading">#</a></h2>
<section id="simple-model">
<h3>Simple model<a class="headerlink" href="#simple-model" title="Link to this heading">#</a></h3>
<p>User-level name: <code class="docutils literal notranslate"><span class="pre">&quot;simple&quot;</span></code></p>
<p>Underlying class: <code class="docutils literal notranslate"><span class="pre">SimpleTurbine</span></code></p>
<p>Required data on <code class="docutils literal notranslate"><span class="pre">power_thrust_table</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ref_air_density</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ref_tilt</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wind_speed</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">power</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">thrust_coefficient</span></code> (list)</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">&quot;simple&quot;</span></code> operation model describes the &quot;normal&quot; function of a wind turbine, as described by
its power curve and thrust coefficient. It does not respond to any control setpoints, and is most
often used as a baseline or for users wanting to evaluate wind farms in nominal operation.</p>
</section>
<section id="cosine-loss-model">
<h3>Cosine loss model<a class="headerlink" href="#cosine-loss-model" title="Link to this heading">#</a></h3>
<p>User-level name: <code class="docutils literal notranslate"><span class="pre">&quot;cosine-loss&quot;</span></code></p>
<p>Underlying class: <code class="docutils literal notranslate"><span class="pre">CosineLossTurbine</span></code></p>
<p>Required data on <code class="docutils literal notranslate"><span class="pre">power_thrust_table</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ref_air_density</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ref_tilt</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wind_speed</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">power</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">thrust_coefficient</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cosine_loss_exponent_yaw</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cosine_loss_exponent_tilt</span></code> (scalar)</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">&quot;cosine-loss&quot;</span></code> operation model describes the decrease in power and thrust produced by a
wind turbine as it yaws (or tilts) away from the incoming wind. The thrust is reduced by a factor of
<span class="math notranslate nohighlight">\(\cos \gamma\)</span>, where <span class="math notranslate nohighlight">\(\gamma\)</span> is the yaw misalignment angle, while the power is reduced by a factor
of <span class="math notranslate nohighlight">\((\cos\gamma)^{p_P}\)</span>, where <span class="math notranslate nohighlight">\(p_P\)</span> is the cosine loss exponent, specified by <code class="docutils literal notranslate"><span class="pre">cosine_loss_exponent_yaw</span></code>
(or <code class="docutils literal notranslate"><span class="pre">cosine_loss_exponent_tilt</span></code> for tilt angles). The power and thrust produced by the turbine
thus vary as a function of the turbine's yaw angle, set using the <code class="docutils literal notranslate"><span class="pre">yaw_angles</span></code> argument to
<code class="docutils literal notranslate"><span class="pre">FlorisModel.set()</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">floris</span><span class="w"> </span><span class="kn">import</span> <span class="n">TimeSeries</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

<span class="c1"># Set up the FlorisModel</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set_operation_model</span><span class="p">(</span><span class="s2">&quot;cosine-loss&quot;</span><span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">layout_x</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">],</span> <span class="n">layout_y</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">])</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
    <span class="n">wind_data</span><span class="o">=</span><span class="n">TimeSeries</span><span class="p">(</span>
        <span class="n">wind_speeds</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="o">*</span> <span class="mf">8.0</span><span class="p">,</span>
        <span class="n">wind_directions</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="o">*</span> <span class="mf">270.0</span><span class="p">,</span>
        <span class="n">turbulence_intensities</span><span class="o">=</span><span class="mf">0.06</span>
    <span class="p">)</span>
<span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">reset_operation</span><span class="p">()</span>

<span class="c1"># Sweep the yaw angles</span>
<span class="n">yaw_angles</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">25</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">yaw_angles</span><span class="o">=</span><span class="n">yaw_angles</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

<span class="n">powers</span> <span class="o">=</span> <span class="n">fmodel</span><span class="o">.</span><span class="n">get_turbine_powers</span><span class="p">()</span><span class="o">/</span><span class="mi">1000</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">yaw_angles</span><span class="p">,</span> <span class="n">powers</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Yaw angle [deg]&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Power [kW]&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0, 0.5, &#39;Power [kW]&#39;)
</pre></div>
</div>
<img alt="_images/0ccab3cf11744d894e7df3c217d0aac529e53795844d9e320828daacd678337e.png" src="_images/0ccab3cf11744d894e7df3c217d0aac529e53795844d9e320828daacd678337e.png" />
</div>
</div>
</section>
<section id="simple-derating-model">
<h3>Simple derating model<a class="headerlink" href="#simple-derating-model" title="Link to this heading">#</a></h3>
<p>User-level name: <code class="docutils literal notranslate"><span class="pre">&quot;simple-derating&quot;</span></code></p>
<p>Underlying class: <code class="docutils literal notranslate"><span class="pre">SimpleDeratingTurbine</span></code></p>
<p>Required data on <code class="docutils literal notranslate"><span class="pre">power_thrust_table</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ref_air_density</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ref_tilt</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wind_speed</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">power</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">thrust_coefficient</span></code> (list)</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">&quot;simple-derating&quot;</span></code> operation model enables users to derate turbines by setting a new power
rating. It does not require any extra parameters on the <code class="docutils literal notranslate"><span class="pre">power_thrust_table</span></code>, but adescribes the
decrease in power and thrust produced by providing the <code class="docutils literal notranslate"><span class="pre">power_setpoints</span></code> argument to
<code class="docutils literal notranslate"><span class="pre">FlorisModel.set()</span></code>. The default power rating for the turbine can be acheived by setting the
appropriate entries of <code class="docutils literal notranslate"><span class="pre">power_setpoints</span></code> to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set up the FlorisModel</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set_operation_model</span><span class="p">(</span><span class="s2">&quot;simple-derating&quot;</span><span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">reset_operation</span><span class="p">()</span>
<span class="n">wind_speeds</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
    <span class="n">wind_data</span><span class="o">=</span><span class="n">TimeSeries</span><span class="p">(</span>
        <span class="n">wind_speeds</span><span class="o">=</span><span class="n">wind_speeds</span><span class="p">,</span>
        <span class="n">wind_directions</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="o">*</span> <span class="mf">270.0</span><span class="p">,</span>
        <span class="n">turbulence_intensities</span><span class="o">=</span><span class="mf">0.06</span>
    <span class="p">)</span>
<span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="k">for</span> <span class="n">power_setpoint</span> <span class="ow">in</span> <span class="p">[</span><span class="mf">5.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">]:</span>
    <span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">power_setpoints</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="n">power_setpoint</span><span class="o">*</span><span class="mf">1e6</span><span class="p">]]</span><span class="o">*</span><span class="mi">100</span><span class="p">))</span>
    <span class="n">fmodel</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
    <span class="n">powers</span> <span class="o">=</span> <span class="n">fmodel</span><span class="o">.</span><span class="n">get_turbine_powers</span><span class="p">()</span><span class="o">/</span><span class="mi">1000</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">wind_speeds</span><span class="p">,</span> <span class="n">powers</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Power setpoint (MW): </span><span class="si">{</span><span class="n">power_setpoint</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Wind speed [m/s]&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Power [kW]&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/home/runner/work/floris/floris/floris/core/turbine/operation_models.py:358: RuntimeWarning: divide by zero encountered in divide
  power_fractions = power_setpoints / base_powers
/home/runner/work/floris/floris/floris/core/wake_deflection/gauss.py:328: RuntimeWarning: invalid value encountered in divide
  val = 2 * (avg_v - v_core) / (v_top + v_bottom)
/home/runner/work/floris/floris/floris/core/wake_deflection/gauss.py:163: RuntimeWarning: invalid value encountered in divide
  C0 = 1 - u0 / freestream_velocity
/home/runner/work/floris/floris/floris/core/wake_velocity/gauss.py:80: RuntimeWarning: invalid value encountered in divide
  sigma_z0 = rotor_diameter_i * 0.5 * np.sqrt(uR / (u_initial + u0))
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0, 0.5, &#39;Power [kW]&#39;)
</pre></div>
</div>
<img alt="_images/28e29e0bb0f187bfbc8aa62ca31c2d020bac8c1e08b3770e16c945195eb14e02.png" src="_images/28e29e0bb0f187bfbc8aa62ca31c2d020bac8c1e08b3770e16c945195eb14e02.png" />
</div>
</div>
</section>
<section id="mixed-operation-model">
<h3>Mixed operation model<a class="headerlink" href="#mixed-operation-model" title="Link to this heading">#</a></h3>
<p>User-level name: <code class="docutils literal notranslate"><span class="pre">&quot;mixed&quot;</span></code></p>
<p>Underlying class: <code class="docutils literal notranslate"><span class="pre">MixedOperationTurbine</span></code></p>
<p>Required data on <code class="docutils literal notranslate"><span class="pre">power_thrust_table</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ref_air_density</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ref_tilt</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wind_speed</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">power</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">thrust_coefficient</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cosine_loss_exponent_yaw</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cosine_loss_exponent_tilt</span></code> (scalar)</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">&quot;mixed&quot;</span></code> operation model allows users to specify <em>either</em> <code class="docutils literal notranslate"><span class="pre">yaw_angles</span></code> (evaluated using the
<code class="docutils literal notranslate"><span class="pre">&quot;cosine-loss&quot;</span></code> operation model) <em>or</em> <code class="docutils literal notranslate"><span class="pre">power_setpoints</span></code> (evaluated using the <code class="docutils literal notranslate"><span class="pre">&quot;simple-derating&quot;</span></code>
operation model). That is, for each turbine, and at each <code class="docutils literal notranslate"><span class="pre">findex</span></code>, a non-zero yaw angle or a
non-<code class="docutils literal notranslate"><span class="pre">None</span></code> power setpoint may be specified. However, specifying both a non-zero yaw angle and a
finite power setpoint for the same turbine and at the same <code class="docutils literal notranslate"><span class="pre">findex</span></code> will produce an error.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fmodel</span><span class="o">.</span><span class="n">set_operation_model</span><span class="p">(</span><span class="s2">&quot;mixed&quot;</span><span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">layout_x</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="n">layout_y</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">500.0</span><span class="p">])</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">reset_operation</span><span class="p">()</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
    <span class="n">wind_data</span><span class="o">=</span><span class="n">TimeSeries</span><span class="p">(</span>
        <span class="n">wind_speeds</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">10.0</span><span class="p">]),</span>
        <span class="n">wind_directions</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">270.0</span><span class="p">]),</span>
        <span class="n">turbulence_intensities</span><span class="o">=</span><span class="mf">0.06</span>
    <span class="p">)</span>
<span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
    <span class="n">yaw_angles</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">20.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]]),</span>
    <span class="n">power_setpoints</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="kc">None</span><span class="p">,</span> <span class="mf">2e6</span><span class="p">]])</span>
<span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Powers [kW]: &quot;</span><span class="p">,</span> <span class="n">fmodel</span><span class="o">.</span><span class="n">get_turbine_powers</span><span class="p">()</span><span class="o">/</span><span class="mi">1000</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Powers [kW]:  [[3063.49046772 2000.        ]]
</pre></div>
</div>
</div>
</div>
</section>
<section id="awc-model">
<h3>AWC model<a class="headerlink" href="#awc-model" title="Link to this heading">#</a></h3>
<p>User-level name: <code class="docutils literal notranslate"><span class="pre">&quot;awc&quot;</span></code></p>
<p>Underlying class: <code class="docutils literal notranslate"><span class="pre">AWCTurbine</span></code></p>
<p>Required data on <code class="docutils literal notranslate"><span class="pre">power_thrust_table</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ref_air_density</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ref_tilt</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wind_speed</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">power</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">thrust_coefficient</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">helix_a</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">helix_power_b</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">helix_power_c</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">helix_thrust_b</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">helix_thrust_c</span></code> (scalar)</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">&quot;awc&quot;</span></code> operation model allows for users to define <em>active wake control</em> strategies. These strategies
use pitch control to actively enhance wake mixing and subsequently decrease wake velocity deficits. As a
result, downstream turbines can increase their power production, with limited power loss for the controlled
upstream turbine. The <code class="docutils literal notranslate"><span class="pre">AWCTurbine</span></code> class models this power loss at the turbine applying AWC. For each
turbine, the user can define an AWC strategy to implement through the <code class="docutils literal notranslate"><span class="pre">awc_modes</span></code> array. Note that currently,
only <code class="docutils literal notranslate"><span class="pre">&quot;baseline&quot;</span></code>, i.e., no AWC, and <code class="docutils literal notranslate"><span class="pre">&quot;helix&quot;</span></code>, i.e., the
<a class="reference external" href="https://doi.org/10.1002/we.2513">counterclockwise helix method</a> have been implemented.</p>
<p>The user then defines the exact AWC implementation through setting the variable <code class="docutils literal notranslate"><span class="pre">awc_amplitudes</span></code> for
each turbine. This variable defines the mean-to-peak amplitude of the sinusoidal AWC pitch excitation,
i.e., for a turbine that under <code class="docutils literal notranslate"><span class="pre">awc_modes</span> <span class="pre">=</span> <span class="pre">&quot;baseline&quot;</span></code> has a constant pitch angle of 0 degrees, setting
<code class="docutils literal notranslate"><span class="pre">awc_amplitude</span> <span class="pre">=</span> <span class="pre">2</span></code> results in a pitch signal varying from -2 to 2 degrees over the desired Strouhal
frequency. This Strouhal frequency is not used as an input here, since it has minimal influence on turbine
power production. Note that setting <code class="docutils literal notranslate"><span class="pre">awc_amplitudes</span> <span class="pre">=</span> <span class="pre">0</span></code> effectively disables AWC and is therefore the same
as running a turbine at <code class="docutils literal notranslate"><span class="pre">awc_modes</span> <span class="pre">=</span> <span class="pre">&quot;baseline&quot;</span></code>.</p>
<p>Each example turbine input file <code class="docutils literal notranslate"><span class="pre">floris/turbine_library/*.yaml</span></code> has its own <code class="docutils literal notranslate"><span class="pre">helix_*</span></code> parameter data. These
parameters are determined by fitting data from <code class="docutils literal notranslate"><span class="pre">OpenFAST</span></code> simulations in region II to the following equation:</p>
<div class="math notranslate nohighlight">
\[
    P_\text{AWC} = P_\text{baseline} \cdot (1 - (b + c \cdot P_\text{baseline} ) \cdot A_\text{AWC}^a)
\]</div>
<p>where <span class="math notranslate nohighlight">\(a\)</span> is <code class="docutils literal notranslate"><span class="pre">&quot;helix_a&quot;</span></code>, <span class="math notranslate nohighlight">\(b\)</span> is <code class="docutils literal notranslate"><span class="pre">&quot;helix_power_b&quot;</span></code>, <span class="math notranslate nohighlight">\(c\)</span> is <code class="docutils literal notranslate"><span class="pre">&quot;helix_power_c&quot;</span></code>, and <span class="math notranslate nohighlight">\(A_\text{AWC}\)</span> is <code class="docutils literal notranslate"><span class="pre">awc_amplitudes</span></code>.
The thrust coefficient follows the same equation, but with the respective thrust parameters. When AWC is
turned on while <span class="math notranslate nohighlight">\(P_\text{baseline} &gt; P_\text{rated}\)</span>, a warning is given as the model is not yet tuned for region III.</p>
<p>The figure below shows the fit between the turbine power and thrust in OpenFAST helix AWC simulations (x)
and FLORIS simulations (--) at different region II wind speeds for the NREL 5MW reference turbine.</p>
<!--<img src="powerthrust_helix.png" width="600px">-->
<p><img alt="" src="_images/powerthrust_helix.png" /></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fmodel</span> <span class="o">=</span> <span class="n">FlorisModel</span><span class="p">(</span><span class="s2">&quot;../examples/inputs/emgauss_helix.yaml&quot;</span><span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set_operation_model</span><span class="p">(</span><span class="s2">&quot;awc&quot;</span><span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">layout_x</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="n">layout_y</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">500.0</span><span class="p">])</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">reset_operation</span><span class="p">()</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
    <span class="n">wind_speeds</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">8.0</span><span class="p">]),</span>
    <span class="n">wind_directions</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">270.0</span><span class="p">]),</span>
    <span class="n">turbulence_intensities</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.06</span><span class="p">])</span>
<span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
    <span class="n">awc_modes</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="s2">&quot;helix&quot;</span><span class="p">,</span> <span class="s2">&quot;baseline&quot;</span><span class="p">]]),</span>
    <span class="n">awc_amplitudes</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">2.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>
<span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Powers [kW]: &quot;</span><span class="p">,</span> <span class="n">fmodel</span><span class="o">.</span><span class="n">get_turbine_powers</span><span class="p">()</span><span class="o">/</span><span class="mi">1000</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Powers [kW]:  [[6133.16222884 6301.1399872 ]]
</pre></div>
</div>
</div>
</div>
</section>
<section id="peak-shaving-model">
<h3>Peak shaving model<a class="headerlink" href="#peak-shaving-model" title="Link to this heading">#</a></h3>
<p>User-level name: <code class="docutils literal notranslate"><span class="pre">&quot;peak-shaving&quot;</span></code></p>
<p>Underlying class: <code class="docutils literal notranslate"><span class="pre">PeakShavingTurbine</span></code></p>
<p>Required data on <code class="docutils literal notranslate"><span class="pre">power_thrust_table</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ref_air_density</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ref_tilt</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wind_speed</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">power</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">thrust_coefficient</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">peak_shaving_fraction</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">peak_shaving_TI_threshold</span></code> (scalar)</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">&quot;peak-shaving&quot;</span></code> operation model allows users to implement peak shaving, where the thrust
of the wind turbine is reduced from the nominal curve near rated to reduce unwanted structural
loading. Peak shaving here is implemented here by reducing the thrust by a fixed fraction from
the peak thrust on the nominal thrust curve, as specified by <code class="docutils literal notranslate"><span class="pre">peak_shaving_fraction</span></code>.This only
affects wind speeds near the peak in the thrust
curve (usually near rated wind speed), as thrust values away from the peak will be below the
fraction regardless. Further, peak shaving is only applied if the turbulence intensity experienced
by the turbine meets the <code class="docutils literal notranslate"><span class="pre">peak_shaving_TI_threshold</span></code>. To apply peak shaving in all wind conditions,
<code class="docutils literal notranslate"><span class="pre">peak_shaving_TI_threshold</span></code> may be set to zero.</p>
<p>When the turbine is peak shaving to reduce thrust, the power output is updated accordingly. Letting
<span class="math notranslate nohighlight">\(C_{T}\)</span> represent the thrust coefficient when peak shaving (at given wind speed), and <span class="math notranslate nohighlight">\(C_{T}'\)</span>
represent the thrust coefficient that the turbine would be operating at under nominal control, then
the power <span class="math notranslate nohighlight">\(P\)</span> due to peak shaving (compared to the power <span class="math notranslate nohighlight">\(P'\)</span> available under nominal control) is
computed (based on actuator disk theory) as</p>
<div class="math notranslate nohighlight">
\[ P = \frac{C_T (1 - a)}{C_T' (1 - a')} P'\]</div>
<p>where <span class="math notranslate nohighlight">\(a\)</span> (respectively, <span class="math notranslate nohighlight">\(a'\)</span>) is the axial induction factor corresponding to <span class="math notranslate nohighlight">\(C_T\)</span>
(respectively, <span class="math notranslate nohighlight">\(C_T'\)</span>), computed using the usual relationship from actuator disk theory,
i.e. the lesser solution to <span class="math notranslate nohighlight">\(C_T=4a(1-a)\)</span>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set up the FlorisModel</span>
<span class="n">fmodel</span> <span class="o">=</span> <span class="n">FlorisModel</span><span class="p">(</span><span class="s2">&quot;../examples/inputs/gch.yaml&quot;</span><span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
    <span class="n">layout_x</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">],</span> <span class="n">layout_y</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">],</span>
    <span class="n">wind_data</span><span class="o">=</span><span class="n">TimeSeries</span><span class="p">(</span>
        <span class="n">wind_speeds</span><span class="o">=</span><span class="n">wind_speeds</span><span class="p">,</span>
        <span class="n">wind_directions</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="o">*</span> <span class="mf">270.0</span><span class="p">,</span>
        <span class="n">turbulence_intensities</span><span class="o">=</span><span class="mf">0.2</span> <span class="c1"># Higher than threshold value of 0.1</span>
    <span class="p">)</span>
<span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">reset_operation</span><span class="p">()</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set_operation_model</span><span class="p">(</span><span class="s2">&quot;simple&quot;</span><span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="n">powers_base</span> <span class="o">=</span> <span class="n">fmodel</span><span class="o">.</span><span class="n">get_turbine_powers</span><span class="p">()</span><span class="o">/</span><span class="mi">1000</span>
<span class="n">thrust_coefficients_base</span> <span class="o">=</span> <span class="n">fmodel</span><span class="o">.</span><span class="n">get_turbine_thrust_coefficients</span><span class="p">()</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set_operation_model</span><span class="p">(</span><span class="s2">&quot;peak-shaving&quot;</span><span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="n">powers_peak_shaving</span> <span class="o">=</span> <span class="n">fmodel</span><span class="o">.</span><span class="n">get_turbine_powers</span><span class="p">()</span><span class="o">/</span><span class="mi">1000</span>
<span class="n">thrust_coefficients_peak_shaving</span> <span class="o">=</span> <span class="n">fmodel</span><span class="o">.</span><span class="n">get_turbine_thrust_coefficients</span><span class="p">()</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">wind_speeds</span><span class="p">,</span> <span class="n">thrust_coefficients_base</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Without peak shaving&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">wind_speeds</span><span class="p">,</span> <span class="n">thrust_coefficients_peak_shaving</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;With peak shaving&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;C0&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">wind_speeds</span><span class="p">,</span> <span class="n">powers_base</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Without peak shaving&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">wind_speeds</span><span class="p">,</span> <span class="n">powers_peak_shaving</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;With peak shaving&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;C0&quot;</span><span class="p">)</span>

<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Thrust coefficient [-]&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Wind speed [m/s]&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Power [kW]&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0, 0.5, &#39;Power [kW]&#39;)
</pre></div>
</div>
<img alt="_images/1771bba32c145315342e26aa4e6f5c318e029503afaa1e20ace8662265b61fab.png" src="_images/1771bba32c145315342e26aa4e6f5c318e029503afaa1e20ace8662265b61fab.png" />
</div>
</div>
</section>
<section id="controller-dependent-model">
<h3>Controller-dependent model<a class="headerlink" href="#controller-dependent-model" title="Link to this heading">#</a></h3>
<p>User-level name: <code class="docutils literal notranslate"><span class="pre">&quot;controller-dependent&quot;</span></code></p>
<p>Underlying class: <code class="docutils literal notranslate"><span class="pre">ControllerDependentTurbine</span></code></p>
<p>Required data on <code class="docutils literal notranslate"><span class="pre">power_thrust_table</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">rotor_solidity</span></code>: (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rated_rpm</span></code>: (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">generator_efficiency</span></code>: (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rated_power</span></code>: (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rotor_diameter</span></code>: (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">beta</span></code>: (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cd</span></code>: (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cl_alfa</span></code>: (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cp_ct_data_file</span></code>: (string)</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">&quot;controller-dependent&quot;</span></code> operation model is an advanced operation model that uses the turbine's Cp/Ct
surface to optimize performance under yaw misalignment.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">&quot;controller-dependent&quot;</span></code> operation model determines the wind turbine power output in yaw misalignment conditions, taking into account the effects of the control system.
When the rotor operates in below-rated conditions, the models assumes that blade pitch is equal to the optimal value (corresponding to maximum power coefficient <span class="math notranslate nohighlight">\(C_P\)</span>),
while the generator torque is scheduled as a function of rotational speed <span class="math notranslate nohighlight">\(\omega\)</span> according to the <span class="math notranslate nohighlight">\(K\omega^2\)</span> law.
The <span class="math notranslate nohighlight">\(K\)</span> coefficient is computed using the condition of maximum efficiency as shown in Chapter 7 of <span id="id1">Hansen [<a class="reference internal" href="bibliography.html#id31" title="M.O.L. Hansen. Aerodynamics of wind turbines: Third edition. Routledge, 05 2015. ISBN 9781315769981. doi:10.4324/9781315769981.">1</a>]</span>.
When the turbine operates above rated wind speed, the rotor speed is fixed and equal to the rated value, while the pitch angle is used to keep the power output equal to rated.
The <code class="docutils literal notranslate"><span class="pre">&quot;controller-dependent&quot;</span></code> operation model solves a balance equation between electrical power and aerodynamic power, assuming the aforementioned control strategies.
This yields the pitch and torque values that correspond to the current inflow and yaw misalignment. Based on these quantities, the power output of the turbine is computed.
Because the balance equation must be solved, the <code class="docutils literal notranslate"><span class="pre">ControllerDependentTurbine</span></code> is slower to execute than some other operation models.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">&quot;controller-dependent&quot;</span></code> operation model considers the effect of vertical shear. Hence, the wind turbine can perform differently depending on the direction of misalignment.
Vertical shear is computed locally at each rotor, so it can be affected by wake impingement. The model includes both the effects of yaw and tilt on rotor performance.
To include the effects of shear, ensure that <code class="docutils literal notranslate"><span class="pre">turbine_grid_points</span></code> is greater than 1 in the main FLORIS configuration file.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">&quot;controller-dependent&quot;</span></code> operation model requires the definition of some parameters that depend on the turbine:</p>
<ol class="arabic simple">
<li><p>Rated rotation speed (<code class="docutils literal notranslate"><span class="pre">rated_rpm</span></code>), generator efficiency (<code class="docutils literal notranslate"><span class="pre">generator_efficiency</span></code>), and rated power, specified in kW (<code class="docutils literal notranslate"><span class="pre">rated_power</span></code>).</p></li>
<li><p>Three parameters that describe the aerodynamics of the blade, namely <code class="docutils literal notranslate"><span class="pre">beta</span></code> (twist), <code class="docutils literal notranslate"><span class="pre">cd</span></code> (drag) and <code class="docutils literal notranslate"><span class="pre">cl_alfa</span></code> (lift slope).
These parameters are provided for the NREL 5MW, IEA 10MW, and IEA 15MW turbines in the &quot;floris/turbine_library/&quot;.
When using a different turbine model, these parameters can be estimated as shown in Section 3.5 of <span id="id2">Tamaro <em>et al.</em> [<a class="reference internal" href="bibliography.html#id30" title="S. Tamaro, F. Campagnolo, and C. L. Bottasso. On the power and control of a misaligned rotor – beyond the cosine law. Wind Energy Science, 9(7):1547–1575, 2024. URL: https://wes.copernicus.org/articles/9/1547/2024/, doi:10.5194/wes-9-1547-2024.">2</a>]</span>.</p></li>
<li><p>Look-up tables of the power coefficient (<span class="math notranslate nohighlight">\(C_P\)</span>) and thrust coefficient <span class="math notranslate nohighlight">\(C_T\)</span> as functions of tip-speed ratio and blade pitch angle.
Approximate values for these are provided for the reference turbines in &quot;floris/turbine_library/&quot;.</p></li>
<li><p>Rotor solidity (<code class="docutils literal notranslate"><span class="pre">rotor_solidity</span></code>), i.e. the fraction of the rotor area occupied by the blades.</p></li>
</ol>
<p>Further details can be found in <span id="id3">Tamaro <em>et al.</em> [<a class="reference internal" href="bibliography.html#id30" title="S. Tamaro, F. Campagnolo, and C. L. Bottasso. On the power and control of a misaligned rotor – beyond the cosine law. Wind Energy Science, 9(7):1547–1575, 2024. URL: https://wes.copernicus.org/articles/9/1547/2024/, doi:10.5194/wes-9-1547-2024.">2</a>]</span>.
Developed and implemented by Simone Tamaro, Filippo Campagnolo, and Carlo L. Bottasso at Technische Universität München (TUM) (email: <a class="reference external" href="mailto:simone&#46;tamaro&#37;&#52;&#48;tum&#46;de">simone<span>&#46;</span>tamaro<span>&#64;</span>tum<span>&#46;</span>de</a>).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">N</span>  <span class="o">=</span> <span class="mi">101</span> <span class="c1"># How many steps to cover yaw range in</span>
<span class="n">yaw_max</span> <span class="o">=</span> <span class="mi">30</span> <span class="c1"># Maximum yaw to test</span>

<span class="c1"># Set up the yaw angle sweep</span>
<span class="n">yaw_angles</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="n">yaw_max</span><span class="p">,</span> <span class="n">yaw_max</span><span class="p">,</span> <span class="n">N</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># We can use the same FlorisModel, but we&#39;ll set it up for this test</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
    <span class="n">wind_data</span><span class="o">=</span><span class="n">TimeSeries</span><span class="p">(</span>
        <span class="n">wind_speeds</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">N</span><span class="p">)</span> <span class="o">*</span> <span class="mf">8.0</span><span class="p">,</span>
        <span class="n">wind_directions</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">N</span><span class="p">)</span> <span class="o">*</span> <span class="mf">270.0</span><span class="p">,</span>
        <span class="n">turbulence_intensities</span><span class="o">=</span><span class="mf">0.06</span>
    <span class="p">),</span>
    <span class="n">yaw_angles</span><span class="o">=</span><span class="n">yaw_angles</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># We&#39;ll compare the &quot;controller-dependent&quot; model to the standard &quot;cosine-loss&quot; model</span>
<span class="n">op_models</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;cosine-loss&quot;</span><span class="p">,</span> <span class="s2">&quot;controller-dependent&quot;</span><span class="p">]</span>
<span class="n">results</span> <span class="o">=</span> <span class="p">{}</span>

<span class="k">for</span> <span class="n">op_model</span> <span class="ow">in</span> <span class="n">op_models</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Evaluating model: </span><span class="si">{</span><span class="n">op_model</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">fmodel</span><span class="o">.</span><span class="n">set_operation_model</span><span class="p">(</span><span class="n">op_model</span><span class="p">)</span>

    <span class="n">fmodel</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
    <span class="n">results</span><span class="p">[</span><span class="n">op_model</span><span class="p">]</span> <span class="o">=</span> <span class="n">fmodel</span><span class="o">.</span><span class="n">get_turbine_powers</span><span class="p">()</span><span class="o">.</span><span class="n">squeeze</span><span class="p">()</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;C0&quot;</span><span class="p">,</span> <span class="s2">&quot;k&quot;</span><span class="p">]</span>
<span class="n">linestyles</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;solid&quot;</span><span class="p">,</span> <span class="s2">&quot;dashed&quot;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">ls</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">colors</span><span class="p">,</span> <span class="n">linestyles</span><span class="p">):</span>
    <span class="n">central_power</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="n">yaw_angles</span><span class="o">.</span><span class="n">squeeze</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">yaw_angles</span><span class="o">.</span><span class="n">squeeze</span><span class="p">(),</span> <span class="n">results</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">/</span><span class="n">central_power</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">c</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="n">ls</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Yaw angle [deg]&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Normalized turbine power [deg]&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Blue">floris.logging_manager.LoggingManager</span> <span class=" -Color -Color-Bold -Color-Bold-Black">WARNING</span> <span class=" -Color -Color-Yellow">Cp/Ct data provided with FLORIS is for demonstration purposes only, and may not accurately reflect the actual Cp/Ct surfaces of reference wind turbines.</span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Evaluating model: cosine-loss
Evaluating model: controller-dependent
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0, 0.5, &#39;Normalized turbine power [deg]&#39;)
</pre></div>
</div>
<img alt="_images/d0fb089e24021f5fa88fa5b87df410b23be91bcc3827d7d379358239e22b7d34.png" src="_images/d0fb089e24021f5fa88fa5b87df410b23be91bcc3827d7d379358239e22b7d34.png" />
</div>
</div>
<p><strong>WARNING</strong>: The power and thrust curves generated by querying tabulated data as a function of blade pitch and tip-speed ratio for the reference wind turbines is <em>not</em> an exact match for the reference power and thrust curves found at the IEA Wind Task 37's <a class="reference external" href="https://github.com/IEAWindTask37">Github page</a> or the NREL 5MW <a class="reference external" href="https://github.com/NREL/turbine-models/blob/master/Offshore/NREL_5MW_126_RWT_corrected.csv">reference data</a>. As such, results using the Controller-dependent model, which rely on these <span class="math notranslate nohighlight">\(C_P\)</span> and <span class="math notranslate nohighlight">\(C_T\)</span> tables, should be considered demonstrative only and not necessarily consistent with other results using the reference wind turbines.</p>
<p>For example, the nominal power and thrust curves for the IEA 15MW, IEA 10MW, and NREL 5MW are shown below, along with their derivations from the provided demonstrative <span class="math notranslate nohighlight">\(C_P\)</span> / <span class="math notranslate nohighlight">\(C_T\)</span> tables.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fmodel</span><span class="o">.</span><span class="n">reset_operation</span><span class="p">()</span>
<span class="k">for</span> <span class="n">turbine</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;nrel_5MW&quot;</span><span class="p">,</span> <span class="s2">&quot;iea_10MW&quot;</span><span class="p">,</span> <span class="s2">&quot;iea_15MW&quot;</span><span class="p">]:</span>
    <span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
        <span class="n">layout_x</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">],</span> <span class="n">layout_y</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">],</span> <span class="n">turbine_type</span><span class="o">=</span><span class="p">[</span><span class="n">turbine</span><span class="p">],</span>
        <span class="n">wind_data</span><span class="o">=</span><span class="n">TimeSeries</span><span class="p">(</span>
            <span class="n">wind_speeds</span><span class="o">=</span><span class="n">wind_speeds</span><span class="p">,</span>
            <span class="n">wind_directions</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="o">*</span> <span class="mf">270.0</span><span class="p">,</span>
            <span class="n">turbulence_intensities</span><span class="o">=</span><span class="mf">0.2</span> <span class="c1"># Higher than threshold value of 0.1</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="c1"># Simple model (using reference power and thrust curves)</span>
    <span class="n">fmodel</span><span class="o">.</span><span class="n">set_operation_model</span><span class="p">(</span><span class="s2">&quot;simple&quot;</span><span class="p">)</span>
    <span class="n">fmodel</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
    <span class="n">P_s</span> <span class="o">=</span> <span class="n">fmodel</span><span class="o">.</span><span class="n">get_turbine_powers</span><span class="p">()</span><span class="o">/</span><span class="mi">1000</span>
    <span class="n">CT_s</span> <span class="o">=</span> <span class="n">fmodel</span><span class="o">.</span><span class="n">get_turbine_thrust_coefficients</span><span class="p">()</span>

    <span class="c1"># Controller-dependent model (using demonstration Cp/Ct tables)</span>
    <span class="n">fmodel</span><span class="o">.</span><span class="n">set_operation_model</span><span class="p">(</span><span class="s2">&quot;controller-dependent&quot;</span><span class="p">)</span>
    <span class="n">fmodel</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
    <span class="n">P_cd</span> <span class="o">=</span> <span class="n">fmodel</span><span class="o">.</span><span class="n">get_turbine_powers</span><span class="p">()</span><span class="o">/</span><span class="mi">1000</span>
    <span class="n">CT_cd</span> <span class="o">=</span> <span class="n">fmodel</span><span class="o">.</span><span class="n">get_turbine_thrust_coefficients</span><span class="p">()</span>

    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">wind_speeds</span><span class="p">,</span> <span class="n">CT_s</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Reference data&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">wind_speeds</span><span class="p">,</span> <span class="n">CT_cd</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Cp/Ct tables&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">wind_speeds</span><span class="p">,</span> <span class="n">P_s</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Reference data&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">wind_speeds</span><span class="p">,</span> <span class="n">P_cd</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Cp/Ct data&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">)</span>

    <span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Thrust coefficient [-]&quot;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Wind speed [m/s]&quot;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Power [kW]&quot;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">turbine</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Blue">floris.logging_manager.LoggingManager</span> <span class=" -Color -Color-Bold -Color-Bold-Black">WARNING</span> <span class=" -Color -Color-Yellow">Cp/Ct data provided with FLORIS is for demonstration purposes only, and may not accurately reflect the actual Cp/Ct surfaces of reference wind turbines.</span>
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Blue">floris.floris_model.FlorisModel</span> <span class=" -Color -Color-Bold -Color-Bold-Black">WARNING</span> <span class=" -Color -Color-Yellow">turbine_type has been changed without specifying a new reference_wind_height. reference_wind_height remains 90.00 m. Consider calling `FlorisModel.assign_hub_height_to_ref_height` to update the reference wind height to the turbine hub height.</span>
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Blue">floris.logging_manager.LoggingManager</span> <span class=" -Color -Color-Bold -Color-Bold-Black">WARNING</span> <span class=" -Color -Color-Yellow">Cp/Ct data provided with FLORIS is for demonstration purposes only, and may not accurately reflect the actual Cp/Ct surfaces of reference wind turbines.</span>
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/home/runner/work/floris/floris/floris/core/turbine/controller_dependent_operation_model.py:440: RuntimeWarning: invalid value encountered in divide
  u_u_hh = mean_speed / mean_speed[int(np.floor(len(mean_speed) / 2))]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/home/runner/work/floris/floris/floris/core/turbine/controller_dependent_operation_model.py:958: RuntimeWarning: invalid value encountered in sqrt
  (1 + np.sqrt(1 - x - 1 / 16 * x**2 * sinMu**2))
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/home/runner/work/floris/floris/floris/core/turbine/controller_dependent_operation_model.py:331: RuntimeWarning: The iteration is not making good progress, as measured by the 
 improvement from the last ten iterations.
  ct = fsolve(ControllerDependentTurbine.get_ct, x0, args=data) # Solves eq. (25)
/home/runner/work/floris/floris/floris/core/turbine/controller_dependent_operation_model.py:357: RuntimeWarning: The iteration is not making good progress, as measured by the 
 improvement from the last ten iterations.
  ct = fsolve(ControllerDependentTurbine.get_ct, x0, args=data) # Solves eq. (25)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Powers more than 1% above rated detected. Consider checking Cp-Ct data.
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Blue">floris.floris_model.FlorisModel</span> <span class=" -Color -Color-Bold -Color-Bold-Black">WARNING</span> <span class=" -Color -Color-Yellow">turbine_type has been changed without specifying a new reference_wind_height. reference_wind_height remains 90.00 m. Consider calling `FlorisModel.assign_hub_height_to_ref_height` to update the reference wind height to the turbine hub height.</span>
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Blue">floris.logging_manager.LoggingManager</span> <span class=" -Color -Color-Bold -Color-Bold-Black">WARNING</span> <span class=" -Color -Color-Yellow">Cp/Ct data provided with FLORIS is for demonstration purposes only, and may not accurately reflect the actual Cp/Ct surfaces of reference wind turbines.</span>
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Blue">floris.floris_model.FlorisModel</span> <span class=" -Color -Color-Bold -Color-Bold-Black">WARNING</span> <span class=" -Color -Color-Yellow">turbine_type has been changed without specifying a new reference_wind_height. reference_wind_height remains 90.00 m. Consider calling `FlorisModel.assign_hub_height_to_ref_height` to update the reference wind height to the turbine hub height.</span>
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Blue">floris.logging_manager.LoggingManager</span> <span class=" -Color -Color-Bold -Color-Bold-Black">WARNING</span> <span class=" -Color -Color-Yellow">Cp/Ct data provided with FLORIS is for demonstration purposes only, and may not accurately reflect the actual Cp/Ct surfaces of reference wind turbines.</span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Powers more than 1% above rated detected. Consider checking Cp-Ct data.
</pre></div>
</div>
<img alt="_images/5853108421f2faed4c010312f7d28b1dc85cb5976e818aec778788fa501d07e5.png" src="_images/5853108421f2faed4c010312f7d28b1dc85cb5976e818aec778788fa501d07e5.png" />
<img alt="_images/addbfaf2a274fb1ecdb7b08b268d48aaa569ed54f4f8304b23c8b060d45bfd43.png" src="_images/addbfaf2a274fb1ecdb7b08b268d48aaa569ed54f4f8304b23c8b060d45bfd43.png" />
<img alt="_images/309f0bfcb5ea3415e71308df85668fef22c5401d7c39b11e8f1f31db5ba51daa.png" src="_images/309f0bfcb5ea3415e71308df85668fef22c5401d7c39b11e8f1f31db5ba51daa.png" />
</div>
</div>
</section>
<section id="unified-momentum-model">
<h3>Unified Momentum Model<a class="headerlink" href="#unified-momentum-model" title="Link to this heading">#</a></h3>
<p>User-level name: <code class="docutils literal notranslate"><span class="pre">&quot;unified-momentum&quot;</span></code></p>
<p>Underlying class: <code class="docutils literal notranslate"><span class="pre">UnifiedMomentumModelTurbine</span></code></p>
<p>Required data on <code class="docutils literal notranslate"><span class="pre">power_thrust_table</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ref_air_density</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ref_tilt</span></code> (scalar)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wind_speed</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">power</span></code> (list)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">thrust_coefficient</span></code> (list)</p></li>
</ul>
<p>An extension of the classical one-dimensional momentum theory to model the induction of an
actuator disk is presented in <span id="id4">K.S. Heck and Howland [<a class="reference internal" href="bibliography.html#id32" title="H.M. Johlas K.S. Heck and M.F. Howland. Modelling the induction, thrust and power of a yaw-misaligned actuator disk. Journal of Fluid Mechanics, mar 2023. URL: https://doi.org/10.1017/jfm.2023.129, doi:10.1017/jfm.2023.129.">3</a>]</span> to directly account
for power and thrust loss due to yaw misalignment rather than using an empirical correction
as in the cosine loss model. Analytical expressions for the induction, thrust, initial wake
velocities and power are developed as a function of the yaw angle and thrust coefficient.</p>
<p>Note that the low thrust limit of the Unified Momentum Model is presently implemented in FLORIS, which returns the equations derived and validated in Heck et al. (2023).
This low thrust limit will be accurate for thrust coefficients approximately less than 0.9.</p>
<p>This section recreates key validation figures discussed in the paper through FLORIS.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n_points</span> <span class="o">=</span> <span class="mi">20</span>

<span class="n">fmodel</span><span class="o">.</span><span class="n">set_operation_model</span><span class="p">(</span><span class="s2">&quot;unified-momentum&quot;</span><span class="p">)</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">layout_x</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">],</span> <span class="n">layout_y</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">],</span> <span class="n">turbine_type</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;nrel_5MW&quot;</span><span class="p">])</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">reset_operation</span><span class="p">()</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
    <span class="n">wind_data</span><span class="o">=</span><span class="n">TimeSeries</span><span class="p">(</span>
        <span class="n">wind_speeds</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">n_points</span> <span class="o">*</span> <span class="p">[</span><span class="mf">11.0</span><span class="p">]),</span>
        <span class="n">wind_directions</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">n_points</span> <span class="o">*</span> <span class="p">[</span><span class="mf">270.0</span><span class="p">]),</span>
        <span class="n">turbulence_intensities</span><span class="o">=</span><span class="mf">0.06</span>
    <span class="p">)</span>
<span class="p">)</span>
<span class="n">yaw_angles</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="n">n_points</span><span class="p">)</span>
<span class="n">cos_reference</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">yaw_angles</span><span class="p">))</span>
<span class="n">cos3_reference</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">yaw_angles</span><span class="p">))</span><span class="o">**</span><span class="mi">3</span>

<span class="n">fmodel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">yaw_angles</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">yaw_angles</span><span class="p">,</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)))</span>
<span class="n">fmodel</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

<span class="n">powers</span> <span class="o">=</span> <span class="n">fmodel</span><span class="o">.</span><span class="n">get_turbine_powers</span><span class="p">()</span>
<span class="n">power_ratio_umm</span> <span class="o">=</span> <span class="n">powers</span><span class="p">[:,</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="n">powers</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">yaw_angles</span><span class="p">,</span> <span class="n">power_ratio_umm</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Unified momentum model&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">yaw_angles</span><span class="p">,</span> <span class="n">cos_reference</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;$\cos(\gamma)$&quot;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;purple&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">yaw_angles</span><span class="p">,</span> <span class="n">cos3_reference</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;$\cos^3(\gamma)$&quot;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;orange&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Figure 2 (a): Power ratio vs yaw angle&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Yaw angle, $\gamma$ (degrees)&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Power ratio, $P(\gamma)/P(0)$&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Blue">floris.floris_model.FlorisModel</span> <span class=" -Color -Color-Bold -Color-Bold-Black">WARNING</span> <span class=" -Color -Color-Yellow">turbine_type has been changed without specifying a new reference_wind_height. reference_wind_height remains 90.00 m. Consider calling `FlorisModel.assign_hub_height_to_ref_height` to update the reference wind height to the turbine hub height.</span>
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0, 0.5, &#39;Power ratio, $P(\\gamma)/P(0)$&#39;)
</pre></div>
</div>
<img alt="_images/2b8ee3bc7f98b28bddb9e404d511e274783753825a7c71ec2f17540ef55e96b2.png" src="_images/2b8ee3bc7f98b28bddb9e404d511e274783753825a7c71ec2f17540ef55e96b2.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">floris.core.turbine.unified_momentum_model</span><span class="w"> </span><span class="kn">import</span> <span class="n">Heck</span><span class="p">,</span> <span class="n">LimitedHeck</span>

<span class="n">n_points</span> <span class="o">=</span> <span class="mi">20</span>
<span class="n">yaw_angles</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="n">n_points</span><span class="p">)</span>

<span class="n">ct_prime</span> <span class="o">=</span> <span class="mf">1.33</span>

<span class="n">heck</span> <span class="o">=</span> <span class="n">Heck</span><span class="p">()</span>
<span class="n">ai_umm</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">heck</span><span class="p">(</span><span class="n">ct_prime</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">yaw</span><span class="p">))</span><span class="o">.</span><span class="n">an</span> <span class="k">for</span> <span class="n">yaw</span> <span class="ow">in</span> <span class="n">yaw_angles</span><span class="p">])</span>
<span class="n">heck_no_spanwise</span> <span class="o">=</span> <span class="n">LimitedHeck</span><span class="p">()</span>
<span class="n">ai_no_spanwise</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">heck_no_spanwise</span><span class="p">(</span><span class="n">ct_prime</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">yaw</span><span class="p">))</span><span class="o">.</span><span class="n">an</span> <span class="k">for</span> <span class="n">yaw</span> <span class="ow">in</span> <span class="n">yaw_angles</span><span class="p">])</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">yaw_angles</span><span class="p">,</span> <span class="n">ai_umm</span> <span class="o">/</span> <span class="n">ai_umm</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Yaw-dependent UMM&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">yaw_angles</span><span class="p">,</span> <span class="n">ai_no_spanwise</span><span class="o">/</span> <span class="n">ai_no_spanwise</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Low outlet spanwise velocity limit&quot;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Figure 3: Normalized rotor-normal, rotor-averaged induction for the yawed UMM&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Yaw angle, $\gamma$ (degrees)&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Axial induction ratio, $a_n(\gamma) / a_n(0)$&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0, 0.5, &#39;Axial induction ratio, $a_n(\\gamma) / a_n(0)$&#39;)
</pre></div>
</div>
<img alt="_images/4357330d8fca1328c7cf65c664ddd6b4f680b7a1bfa5e34f0fd9721a6b3b03bc.png" src="_images/4357330d8fca1328c7cf65c664ddd6b4f680b7a1bfa5e34f0fd9721a6b3b03bc.png" />
</div>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="turbine_interaction.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Turbine Library Interface</p>
      </div>
    </a>
    <a class="right-next"
       href="layout_optimization.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Layout Optimization</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#selecting-the-operation-model">Selecting the operation model</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#operation-model-library">Operation model library</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#simple-model">Simple model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cosine-loss-model">Cosine loss model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#simple-derating-model">Simple derating model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mixed-operation-model">Mixed operation model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#awc-model">AWC model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#peak-shaving-model">Peak shaving model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#controller-dependent-model">Controller-dependent model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#unified-momentum-model">Unified Momentum Model</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By National Renewable Energy Laboratory
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>